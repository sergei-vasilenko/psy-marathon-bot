var app=function(){"use strict";function t(){}const e=t=>t;function n(t,e){for(const n in e)t[n]=e[n];return t}function s(t){return t()}function r(){return Object.create(null)}function o(t){t.forEach(s)}function l(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(e,...n){if(null==e){for(const t of n)t(void 0);return t}const s=e.subscribe(...n);return s.unsubscribe?()=>s.unsubscribe():s}function a(t,e,n){t.$$.on_destroy.push(i(e,n))}function u(t,e,n,s){if(t){const r=d(t,e,n,s);return t[0](r)}}function d(t,e,s,r){return t[1]&&r?n(s.ctx.slice(),t[1](r(e))):s.ctx}function $(t,e,n,s){if(t[2]&&s){const r=t[2](s(n));if(void 0===e.dirty)return r;if("object"==typeof r){const t=[],n=Math.max(e.dirty.length,r.length);for(let s=0;s<n;s+=1)t[s]=e.dirty[s]|r[s];return t}return e.dirty|r}return e.dirty}function p(t,e,n,s,r,o){if(r){const l=d(e,n,s,o);t.p(l,r)}}function f(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}function m(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function g(t,e){const n={};e=new Set(e);for(const s in t)e.has(s)||"$"===s[0]||(n[s]=t[s]);return n}function h(t){return null==t?"":t}const v="undefined"!=typeof window;let y=v?()=>window.performance.now():()=>Date.now(),x=v?t=>requestAnimationFrame(t):t;const b=new Set;function _(t){b.forEach((e=>{e.c(t)||(b.delete(e),e.f())})),0!==b.size&&x(_)}function w(t){let e;return 0===b.size&&x(_),{promise:new Promise((n=>{b.add(e={c:t,f:n})})),abort(){b.delete(e)}}}function k(t,e){t.appendChild(e)}function C(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function S(t){const e=U("style");return e.textContent="/* empty */",function(t,e){k(t.head||t,e),e.sheet}(C(t),e),e.sheet}function O(t,e,n){t.insertBefore(e,n||null)}function L(t){t.parentNode&&t.parentNode.removeChild(t)}function T(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function U(t){return document.createElement(t)}function q(t){return document.createTextNode(t)}function E(){return q(" ")}function P(){return q("")}function R(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function j(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const M=["width","height"];function I(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const s in e)null==e[s]?t.removeAttribute(s):"style"===s?t.style.cssText=e[s]:"__value"===s?t.value=t[s]=e[s]:n[s]&&n[s].set&&-1===M.indexOf(s)?t[s]=e[s]:j(t,s,e[s])}function N(t){let e;return{p(...n){e=n,e.forEach((e=>t.push(e)))},r(){e.forEach((e=>t.splice(t.indexOf(e),1)))}}}function z(t){return""===t?null:+t}function A(t,e){e=""+e,t.data!==e&&(t.data=e)}function B(t,e){t.value=null==e?"":e}function W(t,e,n){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e)return void(s.selected=!0)}n&&void 0===e||(t.selectedIndex=-1)}function D(t,e,n){t.classList.toggle(e,!!n)}function H(t,e,{bubbles:n=!1,cancelable:s=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:s})}function F(t,e){return new t(e)}const G=new Map;let K,J=0;function Y(t,e,n,s,r,o,l,c=0){const i=16.666/s;let a="{\n";for(let t=0;t<=1;t+=i){const s=e+(n-e)*o(t);a+=100*t+`%{${l(s,1-s)}}\n`}const u=a+`100% {${l(n,1-n)}}\n}`,d=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${c}`,$=C(t),{stylesheet:p,rules:f}=G.get($)||function(t,e){const n={stylesheet:S(e),rules:{}};return G.set(t,n),n}($,t);f[d]||(f[d]=!0,p.insertRule(`@keyframes ${d} ${u}`,p.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?`${m}, `:""}${d} ${s}ms linear ${r}ms 1 both`,J+=1,d}function Q(t,e){const n=(t.style.animation||"").split(", "),s=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),r=n.length-s.length;r&&(t.style.animation=s.join(", "),J-=r,J||x((()=>{J||(G.forEach((t=>{const{ownerNode:e}=t.stylesheet;e&&L(e)})),G.clear())})))}function V(t){K=t}function X(){if(!K)throw new Error("Function called outside component initialization");return K}function Z(t){X().$$.on_mount.push(t)}function tt(){const t=X();return(e,n,{cancelable:s=!1}={})=>{const r=t.$$.callbacks[e];if(r){const o=H(e,n,{cancelable:s});return r.slice().forEach((e=>{e.call(t,o)})),!o.defaultPrevented}return!0}}function et(t,e){return X().$$.context.set(t,e),e}function nt(t){return X().$$.context.get(t)}const st=[],rt=[];let ot=[];const lt=[],ct=Promise.resolve();let it=!1;function at(t){ot.push(t)}const ut=new Set;let dt,$t=0;function pt(){if(0!==$t)return;const t=K;do{try{for(;$t<st.length;){const t=st[$t];$t++,V(t),ft(t.$$)}}catch(t){throw st.length=0,$t=0,t}for(V(null),st.length=0,$t=0;rt.length;)rt.pop()();for(let t=0;t<ot.length;t+=1){const e=ot[t];ut.has(e)||(ut.add(e),e())}ot.length=0}while(st.length);for(;lt.length;)lt.pop()();it=!1,ut.clear(),V(t)}function ft(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(at)}}function mt(){return dt||(dt=Promise.resolve(),dt.then((()=>{dt=null}))),dt}function gt(t,e,n){t.dispatchEvent(H(`${e?"intro":"outro"}${n}`))}const ht=new Set;let vt;function yt(){vt={r:0,c:[],p:vt}}function xt(){vt.r||o(vt.c),vt=vt.p}function bt(t,e){t&&t.i&&(ht.delete(t),t.i(e))}function _t(t,e,n,s){if(t&&t.o){if(ht.has(t))return;ht.add(t),vt.c.push((()=>{ht.delete(t),s&&(n&&t.d(1),s())})),t.o(e)}else s&&s()}const wt={duration:0};function kt(t,e){const n=e.token={};function s(t,s,r,o){if(e.token!==n)return;e.resolved=o;let l=e.ctx;void 0!==r&&(l=l.slice(),l[r]=o);const c=t&&(e.current=t)(l);let i=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==s&&t&&(yt(),_t(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),xt())})):e.block.d(1),c.c(),bt(c,1),c.m(e.mount(),e.anchor),i=!0),e.block=c,e.blocks&&(e.blocks[s]=c),i&&pt()}if(!(r=t)||"object"!=typeof r&&"function"!=typeof r||"function"!=typeof r.then){if(e.current!==e.then)return s(e.then,1,e.value,t),!0;e.resolved=t}else{const n=X();if(t.then((t=>{V(n),s(e.then,1,e.value,t),V(null)}),(t=>{if(V(n),s(e.catch,2,e.error,t),V(null),!e.hasCatch)throw t})),e.current!==e.pending)return s(e.pending,0),!0}var r}function Ct(t){return void 0!==t?.length?t:Array.from(t)}function St(t,e){t.d(1),e.delete(t.key)}function Ot(t,e){_t(t,1,1,(()=>{e.delete(t.key)}))}function Lt(t,e,n,s,r,l,c,i,a,u,d,$){let p=t.length,f=l.length,m=p;const g={};for(;m--;)g[t[m].key]=m;const h=[],v=new Map,y=new Map,x=[];for(m=f;m--;){const t=$(r,l,m),o=n(t);let i=c.get(o);i?s&&x.push((()=>i.p(t,e))):(i=u(o,t),i.c()),v.set(o,h[m]=i),o in g&&y.set(o,Math.abs(m-g[o]))}const b=new Set,_=new Set;function w(t){bt(t,1),t.m(i,d),c.set(t.key,t),d=t.first,f--}for(;p&&f;){const e=h[f-1],n=t[p-1],s=e.key,r=n.key;e===n?(d=e.first,p--,f--):v.has(r)?!c.has(s)||b.has(s)?w(e):_.has(r)?p--:y.get(s)>y.get(r)?(_.add(s),w(e)):(b.add(r),p--):(a(n,c),p--)}for(;p--;){const e=t[p];v.has(e.key)||a(e,c)}for(;f;)w(h[f-1]);return o(x),h}function Tt(t,e){const n={},s={},r={$$scope:1};let o=t.length;for(;o--;){const l=t[o],c=e[o];if(c){for(const t in l)t in c||(s[t]=1);for(const t in c)r[t]||(n[t]=c[t],r[t]=1);t[o]=c}else for(const t in l)r[t]=1}for(const t in s)t in n||(n[t]=void 0);return n}function Ut(t){return"object"==typeof t&&null!==t?t:{}}function qt(t){t&&t.c()}function Et(t,e,n){const{fragment:r,after_update:c}=t.$$;r&&r.m(e,n),at((()=>{const e=t.$$.on_mount.map(s).filter(l);t.$$.on_destroy?t.$$.on_destroy.push(...e):o(e),t.$$.on_mount=[]})),c.forEach(at)}function Pt(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];ot.forEach((s=>-1===t.indexOf(s)?e.push(s):n.push(s))),n.forEach((t=>t())),ot=e}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Rt(t,e){-1===t.$$.dirty[0]&&(st.push(t),it||(it=!0,ct.then(pt)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function jt(e,n,s,l,c,i,a=null,u=[-1]){const d=K;V(e);const $=e.$$={fragment:null,ctx:[],props:i,update:t,not_equal:c,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:r(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};a&&a($.root);let p=!1;if($.ctx=s?s(e,n.props||{},((t,n,...s)=>{const r=s.length?s[0]:n;return $.ctx&&c($.ctx[t],$.ctx[t]=r)&&(!$.skip_bound&&$.bound[t]&&$.bound[t](r),p&&Rt(e,t)),n})):[],$.update(),p=!0,o($.before_update),$.fragment=!!l&&l($.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);$.fragment&&$.fragment.l(t),t.forEach(L)}else $.fragment&&$.fragment.c();n.intro&&bt(e.$$.fragment),Et(e,n.target,n.anchor),pt()}V(d)}class Mt{$$=void 0;$$set=void 0;$destroy(){Pt(this,1),this.$destroy=t}$on(e,n){if(!l(n))return t;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const t=s.indexOf(n);-1!==t&&s.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");const It={},Nt={},zt={},At=/^:(.+)/,Bt=t=>t.replace(/(^\/+|\/+$)/g,"").split("/"),Wt=t=>t.replace(/(^\/+|\/+$)/g,""),Dt=(t,e)=>({route:t,score:t.default?0:Bt(t.path).reduce(((t,e)=>(t+=4,""===e?t+=1:At.test(e)?t+=2:"*"===e[0]?t-=5:t+=3,t)),0),index:e}),Ht=(t,e)=>{let n,s;const[r]=e.split("?"),o=Bt(r),l=""===o[0],c=(t=>t.map(Dt).sort(((t,e)=>t.score<e.score?1:t.score>e.score?-1:t.index-e.index)))(t);for(let t=0,r=c.length;t<r;t++){const r=c[t].route;let i=!1;if(r.default){s={route:r,params:{},uri:e};continue}const a=Bt(r.path),u={},d=Math.max(o.length,a.length);let $=0;for(;$<d;$++){const t=a[$],e=o[$];if(t&&"*"===t[0]){u["*"===t?"*":t.slice(1)]=o.slice($).map(decodeURIComponent).join("/");break}if(void 0===e){i=!0;break}const n=At.exec(t);if(n&&!l){const t=decodeURIComponent(e);u[n[1]]=t}else if(t!==e){i=!0;break}}if(!i){n={route:r,params:u,uri:"/"+o.slice(0,$).join("/")};break}}return n||s||null},Ft=(t,e)=>t+(e?`?${e}`:""),Gt=(t,e)=>`${Wt("/"===e?t:`${Wt(t)}/${Wt(e)}`)}/`,Kt=()=>"undefined"!=typeof window&&"document"in window&&"location"in window,Jt=t=>({active:4&t}),Yt=t=>({active:!!t[2]});function Qt(t){let e,s,r,o;const l=t[17].default,c=u(l,t,t[16],Yt);let i=[{href:t[0]},{"aria-current":t[2]},t[1],t[6]],a={};for(let t=0;t<i.length;t+=1)a=n(a,i[t]);return{c(){e=U("a"),c&&c.c(),I(e,a)},m(n,l){O(n,e,l),c&&c.m(e,null),s=!0,r||(o=R(e,"click",t[5]),r=!0)},p(t,[n]){c&&c.p&&(!s||65540&n)&&p(c,l,t,t[16],s?$(l,t[16],n,Jt):f(t[16]),Yt),I(e,a=Tt(i,[(!s||1&n)&&{href:t[0]},(!s||4&n)&&{"aria-current":t[2]},2&n&&t[1],64&n&&t[6]]))},i(t){s||(bt(c,t),s=!0)},o(t){_t(c,t),s=!1},d(t){t&&L(e),c&&c.d(t),r=!1,o()}}}function Vt(t,e,s){let r;const o=["to","replace","state","getProps","preserveScroll"];let l,c,i=g(e,o),{$$slots:u={},$$scope:d}=e,{to:$="#"}=e,{replace:p=!1}=e,{state:f={}}=e,{getProps:h=(()=>({}))}=e,{preserveScroll:v=!1}=e;const y=nt(It);a(t,y,(t=>s(14,l=t)));const{base:x}=nt(Nt);a(t,x,(t=>s(15,c=t)));const{navigate:b}=nt(zt),_=tt();let w,k,C,S;return t.$$set=t=>{e=n(n({},e),m(t)),s(6,i=g(e,o)),"to"in t&&s(7,$=t.to),"replace"in t&&s(8,p=t.replace),"state"in t&&s(9,f=t.state),"getProps"in t&&s(10,h=t.getProps),"preserveScroll"in t&&s(11,v=t.preserveScroll),"$$scope"in t&&s(16,d=t.$$scope)},t.$$.update=()=>{32896&t.$$.dirty&&s(0,w=((t,e)=>{if(t.startsWith("/"))return t;const[n,s]=t.split("?"),[r]=e.split("?"),o=Bt(n),l=Bt(r);if(""===o[0])return Ft(r,s);if(!o[0].startsWith(".")){const t=l.concat(o).join("/");return Ft(("/"===r?"":"/")+t,s)}const c=l.concat(o),i=[];return c.forEach((t=>{".."===t?i.pop():"."!==t&&i.push(t)})),Ft("/"+i.join("/"),s)})($,c.uri)),16385&t.$$.dirty&&s(12,k=l.pathname.startsWith(w)),16385&t.$$.dirty&&s(13,C=w===l.pathname),8192&t.$$.dirty&&s(2,r=C?"page":void 0),s(1,S=h({location:l,href:w,isPartiallyCurrent:k,isCurrent:C,existingProps:i}))},[w,S,r,y,x,t=>{if(_("click",t),(t=>!t.defaultPrevented&&0===t.button&&!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey))(t)){t.preventDefault();const e=l.pathname===w||p;b(w,{state:f,replace:e,preserveScroll:v})}},i,$,p,f,h,v,k,C,l,c,d,u]}class Xt extends Mt{constructor(t){super(),jt(this,t,Vt,Qt,c,{to:7,replace:8,state:9,getProps:10,preserveScroll:11})}}const Zt=t=>({params:4&t}),te=t=>({params:t[2]});function ee(t){let e,n,s,r;const o=[se,ne],l=[];function c(t,e){return t[0]?0:1}return e=c(t),n=l[e]=o[e](t),{c(){n.c(),s=P()},m(t,n){l[e].m(t,n),O(t,s,n),r=!0},p(t,r){let i=e;e=c(t),e===i?l[e].p(t,r):(yt(),_t(l[i],1,1,(()=>{l[i]=null})),xt(),n=l[e],n?n.p(t,r):(n=l[e]=o[e](t),n.c()),bt(n,1),n.m(s.parentNode,s))},i(t){r||(bt(n),r=!0)},o(t){_t(n),r=!1},d(t){t&&L(s),l[e].d(t)}}}function ne(t){let e;const n=t[8].default,s=u(n,t,t[7],te);return{c(){s&&s.c()},m(t,n){s&&s.m(t,n),e=!0},p(t,r){s&&s.p&&(!e||132&r)&&p(s,n,t,t[7],e?$(n,t[7],r,Zt):f(t[7]),te)},i(t){e||(bt(s,t),e=!0)},o(t){_t(s,t),e=!1},d(t){s&&s.d(t)}}}function se(t){let e,n,s,r={ctx:t,current:null,token:null,hasCatch:!1,pending:le,then:oe,catch:re,value:12,blocks:[,,,]};return kt(n=t[0],r),{c(){e=P(),r.block.c()},m(t,n){O(t,e,n),r.block.m(t,r.anchor=n),r.mount=()=>e.parentNode,r.anchor=e,s=!0},p(e,s){t=e,r.ctx=t,1&s&&n!==(n=t[0])&&kt(n,r)||function(t,e,n){const s=e.slice(),{resolved:r}=t;t.current===t.then&&(s[t.value]=r),t.current===t.catch&&(s[t.error]=r),t.block.p(s,n)}(r,t,s)},i(t){s||(bt(r.block),s=!0)},o(t){for(let t=0;t<3;t+=1){_t(r.blocks[t])}s=!1},d(t){t&&L(e),r.block.d(t),r.token=null,r=null}}}function re(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}function oe(t){let e,s,r;const o=[t[2],t[3]];var l=t[12]?.default||t[12];function c(t,e){let s={};for(let t=0;t<o.length;t+=1)s=n(s,o[t]);return void 0!==e&&12&e&&(s=n(s,Tt(o,[4&e&&Ut(t[2]),8&e&&Ut(t[3])]))),{props:s}}return l&&(e=F(l,c(t))),{c(){e&&qt(e.$$.fragment),s=P()},m(t,n){e&&Et(e,t,n),O(t,s,n),r=!0},p(t,n){if(1&n&&l!==(l=t[12]?.default||t[12])){if(e){yt();const t=e;_t(t.$$.fragment,1,0,(()=>{Pt(t,1)})),xt()}l?(e=F(l,c(t,n)),qt(e.$$.fragment),bt(e.$$.fragment,1),Et(e,s.parentNode,s)):e=null}else if(l){const s=12&n?Tt(o,[4&n&&Ut(t[2]),8&n&&Ut(t[3])]):{};e.$set(s)}},i(t){r||(e&&bt(e.$$.fragment,t),r=!0)},o(t){e&&_t(e.$$.fragment,t),r=!1},d(t){t&&L(s),e&&Pt(e,t)}}}function le(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}function ce(t){let e,n,s=t[1]&&t[1].route===t[5]&&ee(t);return{c(){s&&s.c(),e=P()},m(t,r){s&&s.m(t,r),O(t,e,r),n=!0},p(t,[n]){t[1]&&t[1].route===t[5]?s?(s.p(t,n),2&n&&bt(s,1)):(s=ee(t),s.c(),bt(s,1),s.m(e.parentNode,e)):s&&(yt(),_t(s,1,1,(()=>{s=null})),xt())},i(t){n||(bt(s),n=!0)},o(t){_t(s),n=!1},d(t){t&&L(e),s&&s.d(t)}}}function ie(t,e,s){let r,{$$slots:o={},$$scope:l}=e,{path:c=""}=e,{component:i=null}=e,u={},d={};const{registerRoute:$,unregisterRoute:p,activeRoute:f}=nt(Nt);a(t,f,(t=>s(1,r=t)));const g={path:c,default:""===c};var h;return $(g),h=()=>{p(g)},X().$$.on_destroy.push(h),t.$$set=t=>{s(11,e=n(n({},e),m(t))),"path"in t&&s(6,c=t.path),"component"in t&&s(0,i=t.component),"$$scope"in t&&s(7,l=t.$$scope)},t.$$.update=()=>{if(r&&r.route===g){s(2,u=r.params);const{component:t,path:n,...o}=e;s(3,d=o),t&&(t.toString().startsWith("class ")?s(0,i=t):s(0,i=t())),Kt()&&!r.preserveScroll&&window?.scrollTo(0,0)}},e=m(e),[i,r,u,d,f,g,c,l,o]}class ae extends Mt{constructor(t){super(),jt(this,t,ie,ce,c,{path:6,component:0})}}const ue=[];function de(e,n=t){let s;const r=new Set;function o(t){if(c(e,t)&&(e=t,s)){const t=!ue.length;for(const t of r)t[1](),ue.push(t,e);if(t){for(let t=0;t<ue.length;t+=2)ue[t][0](ue[t+1]);ue.length=0}}}function l(t){o(t(e))}return{set:o,update:l,subscribe:function(c,i=t){const a=[c,i];return r.add(a),1===r.size&&(s=n(o,l)||t),c(e),()=>{r.delete(a),0===r.size&&s&&(s(),s=null)}}}}function $e(e,n,s){const r=!Array.isArray(e),c=r?[e]:e;if(!c.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const a=n.length<2;return u=(e,s)=>{let u=!1;const d=[];let $=0,p=t;const f=()=>{if($)return;p();const o=n(r?d[0]:d,e,s);a?e(o):p=l(o)?o:t},m=c.map(((t,e)=>i(t,(t=>{d[e]=t,$&=~(1<<e),u&&f()}),(()=>{$|=1<<e}))));return u=!0,f(),function(){o(m),p(),u=!1}},{subscribe:de(s,u).subscribe};var u}const pe=t=>({...t.location,state:t.history.state,key:t.history.state&&t.history.state.key||"initial"}),fe=(t=>{const e=[];let n=pe(t);return{get location(){return n},listen(s){e.push(s);const r=()=>{n=pe(t),s({location:n,action:"POP"})};return t.addEventListener("popstate",r),()=>{t.removeEventListener("popstate",r);const n=e.indexOf(s);e.splice(n,1)}},navigate(s,{state:r,replace:o=!1,preserveScroll:l=!1,blurActiveElement:c=!0}={}){r={...r,key:Date.now()+""};try{o?t.history.replaceState(r,"",s):t.history.pushState(r,"",s)}catch(e){t.location[o?"replace":"assign"](s)}n=pe(t),e.forEach((t=>t({location:n,action:"PUSH",preserveScroll:l}))),c&&document.activeElement.blur()}}})(Kt()?window:((t="/")=>{let e=0;const n=[{pathname:t,search:""}],s=[];return{get location(){return n[e]},addEventListener(t,e){},removeEventListener(t,e){},history:{get entries(){return n},get index(){return e},get state(){return s[e]},pushState(t,r,o){const[l,c=""]=o.split("?");e++,n.push({pathname:l,search:c}),s.push(t)},replaceState(t,r,o){const[l,c=""]=o.split("?");n[e]={pathname:l,search:c},s[e]=t}}}})()),{navigate:me}=fe,ge=t=>({route:4&t,location:2&t}),he=t=>({route:t[2]&&t[2].uri,location:t[1]}),ve=t=>({route:4&t,location:2&t}),ye=t=>({route:t[2]&&t[2].uri,location:t[1]});function xe(t){let e;const n=t[15].default,s=u(n,t,t[14],he);return{c(){s&&s.c()},m(t,n){s&&s.m(t,n),e=!0},p(t,r){s&&s.p&&(!e||16390&r)&&p(s,n,t,t[14],e?$(n,t[14],r,ge):f(t[14]),he)},i(t){e||(bt(s,t),e=!0)},o(t){_t(s,t),e=!1},d(t){s&&s.d(t)}}}function be(e){let n,s,r=e[1].pathname,o=_e(e);return{c(){o.c(),n=P()},m(t,e){o.m(t,e),O(t,n,e),s=!0},p(e,s){2&s&&c(r,r=e[1].pathname)?(yt(),_t(o,1,1,t),xt(),o=_e(e),o.c(),bt(o,1),o.m(n.parentNode,n)):o.p(e,s)},i(t){s||(bt(o),s=!0)},o(t){_t(o),s=!1},d(t){t&&L(n),o.d(t)}}}function _e(n){let s,r,c,i;const a=n[15].default,d=u(a,n,n[14],ye);return{c(){s=U("div"),d&&d.c()},m(t,e){O(t,s,e),d&&d.m(s,null),i=!0},p(t,e){d&&d.p&&(!i||16390&e)&&p(d,a,t,t[14],i?$(a,t[14],e,ve):f(t[14]),ye)},i(o){i||(bt(d,o),o&&at((()=>{i&&(c&&c.end(1),r=function(n,s,r){const o={direction:"in"};let c,i,a=s(n,r,o),u=!1,d=0;function $(){c&&Q(n,c)}function p(){const{delay:s=0,duration:r=300,easing:o=e,tick:l=t,css:p}=a||wt;p&&(c=Y(n,0,1,r,s,o,p,d++)),l(0,1);const f=y()+s,m=f+r;i&&i.abort(),u=!0,at((()=>gt(n,!0,"start"))),i=w((t=>{if(u){if(t>=m)return l(1,0),gt(n,!0,"end"),$(),u=!1;if(t>=f){const e=o((t-f)/r);l(e,1-e)}}return u}))}let f=!1;return{start(){f||(f=!0,Q(n),l(a)?(a=a(o),mt().then(p)):p())},invalidate(){f=!1},end(){u&&($(),u=!1)}}}(s,n[3],{}),r.start())})),i=!0)},o(a){_t(d,a),r&&r.invalidate(),a&&(c=function(n,s,r){const c={direction:"out"};let i,a=s(n,r,c),u=!0;const d=vt;let $;function p(){const{delay:s=0,duration:r=300,easing:l=e,tick:c=t,css:p}=a||wt;p&&(i=Y(n,1,0,r,s,l,p));const f=y()+s,m=f+r;at((()=>gt(n,!1,"start"))),"inert"in n&&($=n.inert,n.inert=!0),w((t=>{if(u){if(t>=m)return c(0,1),gt(n,!1,"end"),--d.r||o(d.c),!1;if(t>=f){const e=l((t-f)/r);c(1-e,e)}}return u}))}return d.r+=1,l(a)?mt().then((()=>{a=a(c),p()})):p(),{end(t){t&&"inert"in n&&(n.inert=$),t&&a.tick&&a.tick(1,0),u&&(i&&Q(n,i),u=!1)}}}(s,n[3],{})),i=!1},d(t){t&&L(s),d&&d.d(t),t&&c&&c.end()}}}function we(t){let e,n,s,r;const o=[be,xe],l=[];function c(t,e){return t[0]?0:1}return e=c(t),n=l[e]=o[e](t),{c(){n.c(),s=P()},m(t,n){l[e].m(t,n),O(t,s,n),r=!0},p(t,[r]){let i=e;e=c(t),e===i?l[e].p(t,r):(yt(),_t(l[i],1,1,(()=>{l[i]=null})),xt(),n=l[e],n?n.p(t,r):(n=l[e]=o[e](t),n.c()),bt(n,1),n.m(s.parentNode,s))},i(t){r||(bt(n),r=!0)},o(t){_t(n),r=!1},d(t){t&&L(s),l[e].d(t)}}}function ke(t,e,n){let s,r,o,l,{$$slots:c={},$$scope:i}=e,{basepath:u="/"}=e,{url:d=null}=e,{viewtransition:$=null}=e,{history:p=fe}=e;et(zt,p);const f=nt(It),m=nt(Nt),g=de([]);a(t,g,(t=>n(12,r=t)));const h=de(null);a(t,h,(t=>n(2,l=t)));let v=!1;const y=f||de(d?{pathname:d}:p.location);a(t,y,(t=>n(1,s=t)));const x=m?m.routerBase:de({path:u,uri:u});a(t,x,(t=>n(13,o=t)));const b=$e([x,h],(([t,e])=>{if(!e)return t;const{path:n}=t,{route:s,uri:r}=e;return{path:s.default?n:s.path.replace(/\*.*$/,""),uri:r}}));let _=!1;return f||(Z((()=>p.listen((t=>{n(11,_=t.preserveScroll||!1),y.set(t.location)})))),et(It,y)),et(Nt,{activeRoute:h,base:x,routerBase:b,registerRoute:t=>{const{path:e}=o;let{path:n}=t;if(t._path=n,t.path=Gt(e,n),"undefined"==typeof window){if(v)return;const e=Ht([t],s.pathname);e&&(h.set(e),v=!0)}else g.update((e=>[...e,t]))},unregisterRoute:t=>{g.update((e=>e.filter((e=>e!==t))))}}),t.$$set=t=>{"basepath"in t&&n(8,u=t.basepath),"url"in t&&n(9,d=t.url),"viewtransition"in t&&n(0,$=t.viewtransition),"history"in t&&n(10,p=t.history),"$$scope"in t&&n(14,i=t.$$scope)},t.$$.update=()=>{if(8192&t.$$.dirty){const{path:t}=o;g.update((e=>e.map((e=>Object.assign(e,{path:Gt(t,e._path)})))))}if(6146&t.$$.dirty){const t=Ht(r,s.pathname);h.set(t?{...t,preserveScroll:_}:t)}},[$,s,l,(t,e,n)=>{const s=$(n);return"function"==typeof s?.fn?s.fn(t,s):s},g,h,y,x,u,d,p,_,r,o,i,c]}class Ce extends Mt{constructor(t){super(),jt(this,t,ke,we,c,{basepath:8,url:9,viewtransition:0,history:10})}}const Se="/admin",Oe=de(!1),Le=de([]),Te=de([]);function Ue(t,e,n){const s=t.slice();return s[3]=e[n],s}function qe(e){let n,s=e[3].title+"";return{c(){n=q(s)},m(t,e){O(t,n,e)},p:t,d(t){t&&L(n)}}}function Ee(t,e){let n,s,r,o;return s=new Xt({props:{to:e[3].path.slice(1),$$slots:{default:[qe]},$$scope:{ctx:e}}}),{key:t,first:null,c(){n=U("li"),qt(s.$$.fragment),r=E(),j(n,"class","navbar__routes-item svelte-148mnmz"),D(n,"active",e[0]===e[3].path),this.first=n},m(t,e){O(t,n,e),Et(s,n,null),k(n,r),o=!0},p(t,r){e=t;const l={};64&r&&(l.$$scope={dirty:r,ctx:e}),s.$set(l),(!o||3&r)&&D(n,"active",e[0]===e[3].path)},i(t){o||(bt(s.$$.fragment,t),o=!0)},o(t){_t(s.$$.fragment,t),o=!1},d(t){t&&L(n),Pt(s)}}}function Pe(t){let e,n,s,r=[],o=new Map,l=Ct(t[1]);const c=t=>t[3].path;for(let e=0;e<l.length;e+=1){let n=Ue(t,l,e),s=c(n);o.set(s,r[e]=Ee(s,n))}return{c(){e=U("div"),n=U("ul");for(let t=0;t<r.length;t+=1)r[t].c();j(n,"class","navbar__routes svelte-148mnmz"),j(e,"class","navbar svelte-148mnmz")},m(t,o){O(t,e,o),k(e,n);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(n,null);s=!0},p(t,[e]){3&e&&(l=Ct(t[1]),yt(),r=Lt(r,e,c,1,t,l,o,n,Ot,Ee,null,Ue),xt())},i(t){if(!s){for(let t=0;t<l.length;t+=1)bt(r[t]);s=!0}},o(t){for(let t=0;t<r.length;t+=1)_t(r[t]);s=!1},d(t){t&&L(e);for(let t=0;t<r.length;t+=1)r[t].d()}}}function Re(t,e,n){let s;a(t,Oe,(t=>n(2,s=t)));const r=Xo.filter((t=>!t.isHidden));let o="/";return nt(It).subscribe((({pathname:t})=>{if(n(0,o=t.replace(Se,"")),"/auth"!==o&&!s)return console.log("REDIRECT"),me(`${Se}/auth`,{replace:!0}),void console.log("AFTER REDIRECT");const e=Xo.find((t=>t.path===o));document.title=e?e.title:"Admin panel"})),[o,r]}class je extends Mt{constructor(t){super(),jt(this,t,Re,Pe,c,{})}}function Me(t){let e,n,s,r,o,l=t[1]?"есть несохраненные данные":"все данные сохранены";return{c(){e=U("div"),n=U("div"),s=E(),r=U("div"),o=q(l),j(n,"class","led__light svelte-uiffbp"),D(n,"led__light--warning",t[1]),j(r,"class","led__text svelte-uiffbp"),j(e,"class","led svelte-uiffbp")},m(t,l){O(t,e,l),k(e,n),k(e,s),k(e,r),k(r,o)},p(t,e){2&e&&D(n,"led__light--warning",t[1]),2&e&&l!==(l=t[1]?"есть несохраненные данные":"все данные сохранены")&&A(o,l)},d(t){t&&L(e)}}}function Ie(t){let e,n,s,r,o,l,c,i,a;n=new je({});let d="boolean"==typeof t[1]&&Me(t);const m=t[3].default,g=u(m,t,t[2],null);return{c(){e=U("main"),qt(n.$$.fragment),s=E(),r=U("div"),d&&d.c(),o=E(),l=U("h1"),c=q(t[0]),i=E(),g&&g.c(),j(l,"class","main__heading"),j(r,"class","content svelte-uiffbp"),j(e,"class","main svelte-uiffbp")},m(t,u){O(t,e,u),Et(n,e,null),k(e,s),k(e,r),d&&d.m(r,null),k(r,o),k(r,l),k(l,c),k(r,i),g&&g.m(r,null),a=!0},p(t,[e]){"boolean"==typeof t[1]?d?d.p(t,e):(d=Me(t),d.c(),d.m(r,o)):d&&(d.d(1),d=null),(!a||1&e)&&A(c,t[0]),g&&g.p&&(!a||4&e)&&p(g,m,t,t[2],a?$(m,t[2],e,null):f(t[2]),null)},i(t){a||(bt(n.$$.fragment,t),bt(g,t),a=!0)},o(t){_t(n.$$.fragment,t),_t(g,t),a=!1},d(t){t&&L(e),Pt(n),d&&d.d(),g&&g.d(t)}}}function Ne(t,e,n){let{$$slots:s={},$$scope:r}=e,{h1:o=""}=e,{hasUnsavedChanges:l}=e;return t.$$set=t=>{"h1"in t&&n(0,o=t.h1),"hasUnsavedChanges"in t&&n(1,l=t.hasUnsavedChanges),"$$scope"in t&&n(2,r=t.$$scope)},[o,l,r,s]}class ze extends Mt{constructor(t){super(),jt(this,t,Ne,Ie,c,{h1:0,hasUnsavedChanges:1})}}function Ae(e){let n;return{c(){n=U("section"),n.innerHTML="<div>Добро пожаловать в админ-панель.</div> <div>Здесь вы можете увидеть актуальное состояние участников марафона, а также\n      создать свой сценарий его проведения.</div> <div>Шаги создания сценария:\n      <ol><li>в разделе &quot;Напоминания&quot; создайте варианты напоминаний, которые можно\n          будет установить в вашем сценарии</li> <li>в разделе &quot;Кнопки&quot; создайте псевдонимы для действий пользователя</li> <li>создавайте сцены и шаги в разделе &quot;Сценарий&quot;</li></ol></div>"},m(t,e){O(t,n,e)},p:t,d(t){t&&L(n)}}}function Be(t){let e,n;return e=new ze({props:{h1:"Админ панель",$$slots:{default:[Ae]},$$scope:{ctx:t}}}),{c(){qt(e.$$.fragment)},m(t,s){Et(e,t,s),n=!0},p(t,[n]){const s={};1&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(bt(e.$$.fragment,t),n=!0)},o(t){_t(e.$$.fragment,t),n=!1},d(t){Pt(e,t)}}}function We(t){let e;const n=t[6].default,s=u(n,t,t[5],null);return{c(){s&&s.c()},m(t,n){s&&s.m(t,n),e=!0},p(t,r){s&&s.p&&(!e||32&r)&&p(s,n,t,t[5],e?$(n,t[5],r,null):f(t[5]),null)},i(t){e||(bt(s,t),e=!0)},o(t){_t(s,t),e=!1},d(t){s&&s.d(t)}}}function De(e){let n;return{c(){n=q("Идет загрузка...")},m(t,e){O(t,n,e)},p:t,i:t,o:t,d(t){t&&L(n)}}}function He(t){let e,n,s,r,o,c;const i=[De,We],a=[];function u(t,e){return t[0]?0:1}return n=u(t),s=a[n]=i[n](t),{c(){e=U("button"),s.c(),e.disabled=t[1],j(e,"class",h("button"+t[3]())+" svelte-rwp6dt")},m(s,i){O(s,e,i),a[n].m(e,null),r=!0,o||(c=R(e,"click",(function(){l(t[2])&&t[2].apply(this,arguments)})),o=!0)},p(o,[l]){let c=n;n=u(t=o),n===c?a[n].p(t,l):(yt(),_t(a[c],1,1,(()=>{a[c]=null})),xt(),s=a[n],s?s.p(t,l):(s=a[n]=i[n](t),s.c()),bt(s,1),s.m(e,null)),(!r||2&l)&&(e.disabled=t[1])},i(t){r||(bt(s),r=!0)},o(t){_t(s),r=!1},d(t){t&&L(e),a[n].d(),o=!1,c()}}}function Fe(t,e,n){let{$$slots:s={},$$scope:r}=e,{loading:o=!1}=e,{theme:l="default"}=e,{disabled:c=!1}=e,{onClick:i=(()=>{})}=e;return t.$$set=t=>{"loading"in t&&n(0,o=t.loading),"theme"in t&&n(4,l=t.theme),"disabled"in t&&n(1,c=t.disabled),"onClick"in t&&n(2,i=t.onClick),"$$scope"in t&&n(5,r=t.$$scope)},[o,c,i,()=>{let t="";return t+=` ${{delete:"button--delete",add:"button--add",default:"button--default"}[l]}`,c&&(t+=" button--disabled"),t},l,r,s]}class Ge extends Mt{constructor(t){super(),jt(this,t,Fe,He,c,{loading:0,theme:4,disabled:1,onClick:2})}}function Ke(t,e,n){const s=t.slice();return s[10]=e[n],s}function Je(t){let e,n,s,r,o,l,c=t[4](t[10])+"";function i(){return t[8](t[10])}return{c(){e=U("div"),n=q(c),s=E(),j(e,"class","select__options-item svelte-13lznyd"),j(e,"key",r=t[10].id)},m(t,r){O(t,e,r),k(e,n),k(e,s),o||(l=R(e,"click",i),o=!0)},p(s,o){t=s,2&o&&c!==(c=t[4](t[10])+"")&&A(n,c),2&o&&r!==(r=t[10].id)&&j(e,"key",r)},d(t){t&&L(e),o=!1,l()}}}function Ye(e){let n,s,r,o,l,c,i,a,u,d=e[4](e[0])+"",$=Ct(e[1]),p=[];for(let t=0;t<$.length;t+=1)p[t]=Je(Ke(e,$,t));return{c(){n=U("div"),s=U("div"),r=U("div"),o=q(d),l=E(),c=U("div");for(let t=0;t<p.length;t+=1)p[t].c();j(r,"class","select__display svelte-13lznyd"),j(s,"class","select__display-container svelte-13lznyd"),j(c,"class","select__options svelte-13lznyd"),D(c,"select__options--close",!e[3]),j(n,"class","select svelte-13lznyd"),j(n,"style",i=`width: ${e[2]}px`)},m(t,i){O(t,n,i),k(n,s),k(s,r),k(r,o),k(n,l),k(n,c);for(let t=0;t<p.length;t+=1)p[t]&&p[t].m(c,null);a||(u=R(s,"click",e[7]),a=!0)},p(t,[e]){if(1&e&&d!==(d=t[4](t[0])+"")&&A(o,d),50&e){let n;for($=Ct(t[1]),n=0;n<$.length;n+=1){const s=Ke(t,$,n);p[n]?p[n].p(s,e):(p[n]=Je(s),p[n].c(),p[n].m(c,null))}for(;n<p.length;n+=1)p[n].d(1);p.length=$.length}8&e&&D(c,"select__options--close",!t[3]),4&e&&i!==(i=`width: ${t[2]}px`)&&j(n,"style",i)},i:t,o:t,d(t){t&&L(n),T(p,t),a=!1,u()}}}function Qe(t,e,n){let{options:s=[]}=e,{view:r}=e,{width:o=250}=e,{selected:l=s[0]}=e;const c=tt();let i=!1;const a=t=>{n(0,l=t),n(3,i=!1),c("update",t)};return t.$$set=t=>{"options"in t&&n(1,s=t.options),"view"in t&&n(6,r=t.view),"width"in t&&n(2,o=t.width),"selected"in t&&n(0,l=t.selected)},[l,s,o,i,t=>"string"==typeof r?t[r]:"function"==typeof r?r(t):t,a,r,()=>n(3,i=!i),t=>a(t)]}class Ve extends Mt{constructor(t){super(),jt(this,t,Qe,Ye,c,{options:1,view:6,width:2,selected:0})}}const Xe=t=>({}),Ze=t=>({}),tn=t=>({}),en=t=>({});function nn(t){let e,n,s,r,o;const l=t[1].label,c=u(l,t,t[0],en),i=t[1].elem,a=u(i,t,t[0],Ze);return{c(){e=U("div"),n=U("div"),c&&c.c(),s=E(),r=U("div"),a&&a.c(),j(n,"class","row__label svelte-dyfzn6"),j(r,"class","row__elem"),j(e,"class","row svelte-dyfzn6")},m(t,l){O(t,e,l),k(e,n),c&&c.m(n,null),k(e,s),k(e,r),a&&a.m(r,null),o=!0},p(t,[e]){c&&c.p&&(!o||1&e)&&p(c,l,t,t[0],o?$(l,t[0],e,tn):f(t[0]),en),a&&a.p&&(!o||1&e)&&p(a,i,t,t[0],o?$(i,t[0],e,Xe):f(t[0]),Ze)},i(t){o||(bt(c,t),bt(a,t),o=!0)},o(t){_t(c,t),_t(a,t),o=!1},d(t){t&&L(e),c&&c.d(t),a&&a.d(t)}}}function sn(t,e,n){let{$$slots:s={},$$scope:r}=e;return t.$$set=t=>{"$$scope"in t&&n(0,r=t.$$scope)},[r,s]}class rn extends Mt{constructor(t){super(),jt(this,t,sn,nn,c,{})}}const on=window.location.origin,ln={async handler(t,e,n){const{params:s={},headers:r=new Headers,body:o=null,credentials:l="include"}=n||{},c=new URL("/api/"+(e?e+"/":""),on);c.search=new URLSearchParams(s);o instanceof FormData||r.append("Content-Type","application/json");const i=await fetch(c,{method:t,params:s,headers:r,body:o,credentials:l});let a=await i.text();if(a=a?JSON.parse(a):{},i.status>=400){const t=new Error;throw t.message=a,t.code=i.status,t}return a},async get(t,e){return await this.handler("GET",t,e)},async post(t,e){return await this.handler("POST",t,e)},async delete(t,e){return await this.handler("DELETE",t,e)}};var cn={auth:{login:async t=>await ln.post("auth/login",{body:JSON.stringify(t)}),logout:async()=>await ln.post("auth/logout"),status:async()=>await ln.get("auth/status")},users:{async list(){const{results:t}=await ln.get("users/list");return t},info:async t=>await ln.get(`users/${t}`),delete:async t=>await ln.delete(`users/${t}`)},scenario:{get:async()=>await ln.get("settings/scenario"),set:async t=>await ln.post("settings/scenario",{body:JSON.stringify(t)}),delete:async()=>await ln.delete("settings/scenario")},aliases:{list:async()=>await ln.get("settings/aliases"),create:async t=>await ln.post("settings/aliases",{body:JSON.stringify(t)}),delete:async()=>await ln.delete("settings/aliases")},reminders:{list:async(t={})=>await ln.get("settings/reminders",{params:t}),create:async t=>await ln.post("settings/reminders",{body:JSON.stringify(t)}),delete:async()=>await ln.delete("settings/reminders")},files:{upload:async t=>await ln.post("files/upload",{body:t}),delete:async t=>await ln.delete(`files/${t}`)}};const an=t=>new Date(t).toLocaleString(),un=t=>`${t.first_name} ${t.last_name}`,dn=t=>{const{since:e,until:n}=t,{hours:s,minutes:r}=(o=n-e,{hours:Math.floor(o/36e5),minutes:Math.floor(o%36e5/6e4)});var o;return s?s&&!r?`${s}h`:`${s}h ${r}min`:`${r}min`},$n=(t,e,n)=>{if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;for(const s of t){if(!e.find((t=>n(s,t))))return!1}return!0},pn=(t,e)=>{if(Array.isArray(t))return t.map((t=>pn(t,e)));if(null!==t&&"object"==typeof t){const n=Object.keys(t),s={};for(const r of n)e(r)?delete s[r]:s[r]=pn(t[r],e);return s}return t};function fn(t,e,n){const s=t.slice();return s[16]=e[n],s[18]=n,s}function mn(t){let e;return{c(){e=q("Delete")},m(t,n){O(t,e,n)},d(t){t&&L(e)}}}function gn(t,e){let n,s,r,o,l,c,i,a,u,d,$,p=e[16].name+"",f=e[16].action.title+"";function m(){return e[10](e[16])}return u=new Ge({props:{theme:"delete",onClick:m,$$slots:{default:[mn]},$$scope:{ctx:e}}}),{key:t,first:null,c(){n=U("div"),s=U("div"),r=q(p),o=E(),l=U("div"),c=q(f),i=E(),a=U("div"),qt(u.$$.fragment),d=E(),j(s,"class","alias__item svelte-1paa8k3"),j(l,"class","alias__item svelte-1paa8k3"),j(a,"class","alias__item svelte-1paa8k3"),j(n,"class","alias svelte-1paa8k3"),D(n,"alias--odd",e[18]%2!=0),this.first=n},m(t,e){O(t,n,e),k(n,s),k(s,r),k(n,o),k(n,l),k(l,c),k(n,i),k(n,a),Et(u,a,null),k(n,d),$=!0},p(t,s){e=t,(!$||1&s)&&p!==(p=e[16].name+"")&&A(r,p),(!$||1&s)&&f!==(f=e[16].action.title+"")&&A(c,f);const o={};1&s&&(o.onClick=m),524288&s&&(o.$$scope={dirty:s,ctx:e}),u.$set(o),(!$||1&s)&&D(n,"alias--odd",e[18]%2!=0)},i(t){$||(bt(u.$$.fragment,t),$=!0)},o(t){_t(u.$$.fragment,t),$=!1},d(t){t&&L(n),Pt(u)}}}function hn(e){let n;return{c(){n=U("span"),n.textContent="Псевдоним",j(n,"slot","label"),j(n,"for","alias"),j(n,"class","label svelte-1paa8k3")},m(t,e){O(t,n,e)},p:t,d(t){t&&L(n)}}}function vn(t){let e,n;return{c(){e=U("div"),n=q(t[3]),j(e,"class","error svelte-1paa8k3")},m(t,s){O(t,e,s),k(e,n)},p(t,e){8&e&&A(n,t[3])},d(t){t&&L(e)}}}function yn(t){let e,n,s,r,l,c=t[3]&&vn(t);return{c(){e=U("div"),n=U("input"),s=E(),c&&c.c(),j(n,"type","text"),j(n,"id","alias"),j(n,"placeholder","Ваш текст"),j(e,"slot","elem")},m(o,i){O(o,e,i),k(e,n),B(n,t[1]),k(e,s),c&&c.m(e,null),r||(l=[R(n,"input",t[11]),R(n,"focus",t[12])],r=!0)},p(t,s){2&s&&n.value!==t[1]&&B(n,t[1]),t[3]?c?c.p(t,s):(c=vn(t),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},d(t){t&&L(e),c&&c.d(),r=!1,o(l)}}}function xn(e){let n;return{c(){n=U("span"),n.textContent="Действие",j(n,"slot","label"),j(n,"class","label svelte-1paa8k3")},m(t,e){O(t,n,e)},p:t,d(t){t&&L(n)}}}function bn(t){let e,n,s;function r(e){t[13](e)}let o={slot:"elem",options:t[5],view:"title"};return void 0!==t[2]&&(o.selected=t[2]),e=new Ve({props:o}),rt.push((()=>function(t,e,n){const s=t.$$.props[e];void 0!==s&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}(e,"selected",r))),{c(){qt(e.$$.fragment)},m(t,n){Et(e,t,n),s=!0},p(t,s){const r={};var o;!n&&4&s&&(n=!0,r.selected=t[2],o=()=>n=!1,lt.push(o)),e.$set(r)},i(t){s||(bt(e.$$.fragment,t),s=!0)},o(t){_t(e.$$.fragment,t),s=!1},d(t){Pt(e,t)}}}function _n(t){let e;return{c(){e=q("Добавить псевдоним")},m(t,n){O(t,e,n)},d(t){t&&L(e)}}}function wn(t){let e;return{c(){e=q("Сохранить")},m(t,n){O(t,e,n)},d(t){t&&L(e)}}}function kn(t){let e,n,s,r,o,l,c,i,a,u,d,$,p,f=[],m=new Map,g=Ct(t[0]);const h=t=>t[16].id;for(let e=0;e<g.length;e+=1){let n=fn(t,g,e),s=h(n);m.set(s,f[e]=gn(s,n))}return o=new rn({props:{$$slots:{elem:[yn],label:[hn]},$$scope:{ctx:t}}}),c=new rn({props:{$$slots:{elem:[bn],label:[xn]},$$scope:{ctx:t}}}),u=new Ge({props:{onClick:t[6],$$slots:{default:[_n]},$$scope:{ctx:t}}}),$=new Ge({props:{theme:"add",onClick:t[8],$$slots:{default:[wn]},$$scope:{ctx:t}}}),{c(){e=U("section"),n=U("div");for(let t=0;t<f.length;t+=1)f[t].c();s=E(),r=U("div"),qt(o.$$.fragment),l=E(),qt(c.$$.fragment),i=E(),a=U("div"),qt(u.$$.fragment),d=E(),qt($.$$.fragment),j(n,"class","alias__list"),j(r,"class","alias__controls svelte-1paa8k3"),j(a,"class","alias__actions svelte-1paa8k3"),j(e,"class","aliases")},m(t,m){O(t,e,m),k(e,n);for(let t=0;t<f.length;t+=1)f[t]&&f[t].m(n,null);k(e,s),k(e,r),Et(o,r,null),k(r,l),Et(c,r,null),k(e,i),k(e,a),Et(u,a,null),k(a,d),Et($,a,null),p=!0},p(t,e){129&e&&(g=Ct(t[0]),yt(),f=Lt(f,e,h,1,t,g,m,n,Ot,gn,null,fn),xt());const s={};524298&e&&(s.$$scope={dirty:e,ctx:t}),o.$set(s);const r={};524292&e&&(r.$$scope={dirty:e,ctx:t}),c.$set(r);const l={};524288&e&&(l.$$scope={dirty:e,ctx:t}),u.$set(l);const i={};524288&e&&(i.$$scope={dirty:e,ctx:t}),$.$set(i)},i(t){if(!p){for(let t=0;t<g.length;t+=1)bt(f[t]);bt(o.$$.fragment,t),bt(c.$$.fragment,t),bt(u.$$.fragment,t),bt($.$$.fragment,t),p=!0}},o(t){for(let t=0;t<f.length;t+=1)_t(f[t]);_t(o.$$.fragment,t),_t(c.$$.fragment,t),_t(u.$$.fragment,t),_t($.$$.fragment,t),p=!1},d(t){t&&L(e);for(let t=0;t<f.length;t+=1)f[t].d();Pt(o),Pt(c),Pt(u),Pt($)}}}function Cn(t){let e,n;return e=new ze({props:{h1:"Псевдонимы для действий",hasUnsavedChanges:t[4],$$slots:{default:[kn]},$$scope:{ctx:t}}}),{c(){qt(e.$$.fragment)},m(t,s){Et(e,t,s),n=!0},p(t,[n]){const s={};16&n&&(s.hasUnsavedChanges=t[4]),524303&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(bt(e.$$.fragment,t),n=!0)},o(t){_t(e.$$.fragment,t),n=!1},d(t){Pt(e,t)}}}function Sn(t,e,n){let s,r=[],o=0;let l,c=[],i="",a="";const u=async()=>{const t=await cn.aliases.list(),{next_id:e,list:s}=t;o=e,n(9,r=s),n(0,c=s)},d=t=>{const e=c.findIndex((e=>e.id===t));if(e<0)return;const s=structuredClone(c);s.splice(e,1),n(0,c=s)};Z((async()=>{await u()}));return t.$$.update=()=>{513&t.$$.dirty&&n(4,s=!$n(r,c,((t,e)=>t.id===e.id)))},[c,i,l,a,s,[{title:"Следующий шаг",value:"continue"},{title:"Нужна помощь",value:"need_help"},{title:"Начать заново",value:"start_over"},{title:"Никаких действий",value:"in_process"}],()=>{i?(n(0,c=[...c,{id:o++,name:i,action:l}]),n(1,i="")):n(3,a="Укажите псевдоним для команды")},d,async()=>{try{await cn.aliases.create({next_id:o,list:c}),await u()}catch(t){console.error(t)}},r,t=>d(t.id),function(){i=this.value,n(1,i)},()=>n(3,a=""),function(t){l=t,n(2,l)}]}function On(t){let e,n,s=t[0].login+"";return{c(){e=U("span"),n=q(s),j(e,"class","auth-form__error svelte-gq2cvq")},m(t,s){O(t,e,s),k(e,n)},p(t,e){1&e&&s!==(s=t[0].login+"")&&A(n,s)},d(t){t&&L(e)}}}function Ln(t){let e,n,s=t[0].password+"";return{c(){e=U("span"),n=q(s),j(e,"class","auth-form__error svelte-gq2cvq")},m(t,s){O(t,e,s),k(e,n)},p(t,e){1&e&&s!==(s=t[0].password+"")&&A(n,s)},d(t){t&&L(e)}}}function Tn(e){let n,s,r,l,c,i,a,u,d,$,p,f,m,g,h,v,y,x,b,_,w=e[0].login&&On(e),C=e[0].password&&Ln(e);return{c(){n=U("section"),s=U("h1"),s.textContent="Авторизация",r=E(),l=U("form"),c=U("div"),i=U("label"),i.textContent="Login",a=E(),u=U("input"),d=E(),w&&w.c(),$=E(),p=U("div"),f=U("label"),f.textContent="Password",m=E(),g=U("input"),h=E(),C&&C.c(),v=E(),y=U("button"),x=q("Войти"),j(s,"class","main-heading"),j(i,"for","login"),j(i,"class","svelte-gq2cvq"),j(u,"id","login"),j(u,"type","text"),j(c,"class","auth-form__input svelte-gq2cvq"),j(f,"for","password"),j(f,"class","svelte-gq2cvq"),j(g,"id","password"),j(g,"type","password"),j(p,"class","auth-form__input svelte-gq2cvq"),j(y,"class","auth-form__button svelte-gq2cvq"),y.disabled=e[2],D(y,"disabled",e[2]),j(l,"class","auth-form svelte-gq2cvq"),j(n,"class","svelte-gq2cvq")},m(t,o){O(t,n,o),k(n,s),k(n,r),k(n,l),k(l,c),k(c,i),k(c,a),k(c,u),B(u,e[1].login),k(c,d),w&&w.m(c,null),k(l,$),k(l,p),k(p,f),k(p,m),k(p,g),B(g,e[1].password),k(p,h),C&&C.m(p,null),k(l,v),k(l,y),k(y,x),b||(_=[R(u,"input",e[4]),R(u,"input",e[5]),R(g,"input",e[6]),R(g,"input",e[7]),R(y,"click",e[3])],b=!0)},p(t,[e]){2&e&&u.value!==t[1].login&&B(u,t[1].login),t[0].login?w?w.p(t,e):(w=On(t),w.c(),w.m(c,null)):w&&(w.d(1),w=null),2&e&&g.value!==t[1].password&&B(g,t[1].password),t[0].password?C?C.p(t,e):(C=Ln(t),C.c(),C.m(p,null)):C&&(C.d(1),C=null),4&e&&(y.disabled=t[2]),4&e&&D(y,"disabled",t[2])},i:t,o:t,d(t){t&&L(n),w&&w.d(),C&&C.d(),b=!1,o(_)}}}function Un(t,e,n){let s;const r={login:"",password:""};let o={login:"",password:""};return t.$$.update=()=>{1&t.$$.dirty&&n(2,s=o.login||o.password)},[o,r,s,async t=>{t.preventDefault();try{await cn.auth.login(r),Oe.set(!0),me(`${Se}/`)}catch(t){Oe.set(!1),t.message.login&&n(0,o.login=t.message.login,o),t.message.password&&n(0,o.password=t.message.password,o)}},function(){r.login=this.value,n(1,r)},()=>n(0,o.login="",o),function(){r.password=this.value,n(1,r)},()=>n(0,o.password="",o)]}class qn{#t=[];#e=()=>{};#n(t){return this.#t.find((e=>e.id===t))}init(t){this.#t=[...t,...this.#t].sort(((t,e)=>t.id-e.id)),this.#e()}update(t){this.#e=()=>t(this.#t),this.#e()}createGroup(t){const e=this.#t.at(-1),n=e?e.id+1:0;return this.#t.push({id:n,name:t,reminders:[]}),this.#e(),this.#t.at(-1)}removeGroup(t){const e=this.#t.findIndex((e=>e.id===t)),n=this.#t[e];return this.#t.splice(e,1),this.#e(),n}createReminder(t,e){const n=this.#t.reduce(((t,e)=>[...t,...e.reminders.map((t=>t.id))]),[]).sort(((t,e)=>t-e)),s=n.length?n.at(-1)+1:0,r=this.#n(t);r.reminders.push({_parent:r,id:s,delay:0,message:"",keyboard:[],...e}),this.#e()}updateReminder(t,e){e(t),this.#e()}removeReminder(t){const e=t._parent.reminders.findIndex((e=>t.id===e.id));t._parent.reminders.splice(e,1),this.#e()}}function En(e){let n;return{c(){n=U("div"),n.textContent="Пока ничего нет",j(n,"class","empty-state svelte-1qtq9vj")},m(t,e){O(t,n,e)},p:t,i:t,o:t,d(t){t&&L(n)}}}class Pn extends Mt{constructor(t){super(),jt(this,t,null,En,c,{})}}const Rn=t=>({}),jn=t=>({}),Mn=t=>({}),In=t=>({});function Nn(t){let e,n,s,r,o,l,c,i,a=t[0].title+"";const d=t[3].content,m=u(d,t,t[2],In),g=t[3].actions,h=u(g,t,t[2],jn);return{c(){e=U("div"),n=U("div"),s=U("h2"),r=q(a),o=E(),m&&m.c(),l=E(),h&&h.c(),j(n,"class","modal-content svelte-gfw858"),j(n,"style",c=`width: ${t[1]}`),j(e,"class","modal svelte-gfw858")},m(t,c){O(t,e,c),k(e,n),k(n,s),k(s,r),k(n,o),m&&m.m(n,null),k(n,l),h&&h.m(n,null),i=!0},p(t,e){(!i||1&e)&&a!==(a=t[0].title+"")&&A(r,a),m&&m.p&&(!i||4&e)&&p(m,d,t,t[2],i?$(d,t[2],e,Mn):f(t[2]),In),h&&h.p&&(!i||4&e)&&p(h,g,t,t[2],i?$(g,t[2],e,Rn):f(t[2]),jn),(!i||2&e&&c!==(c=`width: ${t[1]}`))&&j(n,"style",c)},i(t){i||(bt(m,t),bt(h,t),i=!0)},o(t){_t(m,t),_t(h,t),i=!1},d(t){t&&L(e),m&&m.d(t),h&&h.d(t)}}}function zn(t){let e,n,s=t[0].isOpen&&Nn(t);return{c(){s&&s.c(),e=P()},m(t,r){s&&s.m(t,r),O(t,e,r),n=!0},p(t,[n]){t[0].isOpen?s?(s.p(t,n),1&n&&bt(s,1)):(s=Nn(t),s.c(),bt(s,1),s.m(e.parentNode,e)):s&&(yt(),_t(s,1,1,(()=>{s=null})),xt())},i(t){n||(bt(s),n=!0)},o(t){_t(s),n=!1},d(t){t&&L(e),s&&s.d(t)}}}function An(t,e,n){let{$$slots:s={},$$scope:r}=e,{state:o}=e,{width:l}=e;return t.$$set=t=>{"state"in t&&n(0,o=t.state),"width"in t&&n(1,l=t.width),"$$scope"in t&&n(2,r=t.$$scope)},t.$$.update=()=>{1&t.$$.dirty&&(o.isOpen?document.body.style["overflow-y"]="hidden":document.body.style["overflow-y"]="auto")},[o,l,r,s]}class Bn extends Mt{constructor(t){super(),jt(this,t,An,zn,c,{state:0,width:1})}}function Wn(t){let e;return{c(){e=q("⥆")},m(t,n){O(t,e,n)},d(t){t&&L(e)}}}function Dn(t){let e;return{c(){e=q("⥅")},m(t,n){O(t,e,n)},d(t){t&&L(e)}}}function Hn(t){let e;return{c(){e=q("Удалить кнопку")},m(t,n){O(t,e,n)},d(t){t&&L(e)}}}function Fn(t){let e;return{c(){e=q("Добавить ряд")},m(t,n){O(t,e,n)},d(t){t&&L(e)}}}function Gn(t){let e;return{c(){e=q("Удалить ряд")},m(t,n){O(t,e,n)},d(t){t&&L(e)}}}function Kn(t){let e,n,s,r,l,c,i,a,u,d,$,p,f,m,g,h,v,y,x,b,_,w,C,S,T,q,P,M,I,N;return m=new Ge({props:{onClick:t[9],$$slots:{default:[Wn]},$$scope:{ctx:t}}}),v=new Ve({props:{options:t[1],view:Jn}}),v.$on("update",t[10]),x=new Ge({props:{onClick:t[11],$$slots:{default:[Dn]},$$scope:{ctx:t}}}),w=new Ge({props:{theme:"delete",onClick:t[12],$$slots:{default:[Hn]},$$scope:{ctx:t}}}),T=new Ge({props:{onClick:t[13],$$slots:{default:[Fn]},$$scope:{ctx:t}}}),P=new Ge({props:{theme:"delete",onClick:t[14],$$slots:{default:[Gn]},$$scope:{ctx:t}}}),{c(){e=U("div"),n=U("div"),s=U("div"),s.innerHTML='<span class="label svelte-a25ds">up</span>',r=E(),l=U("div"),l.innerHTML='<span class="label svelte-a25ds">right</span>',c=E(),i=U("div"),i.innerHTML='<span class="label svelte-a25ds">left</span>',a=E(),u=U("div"),u.innerHTML='<span class="label svelte-a25ds">down</span>',d=E(),$=U("div"),p=U("div"),f=U("div"),qt(m.$$.fragment),g=E(),h=U("div"),qt(v.$$.fragment),y=E(),qt(x.$$.fragment),b=E(),_=U("div"),qt(w.$$.fragment),C=E(),S=U("div"),qt(T.$$.fragment),q=E(),qt(P.$$.fragment),j(s,"class","arrow svelte-a25ds"),D(s,"active",t[2].up),j(l,"class","arrow svelte-a25ds"),D(l,"active",t[2].right),j(i,"class","arrow svelte-a25ds"),D(i,"active",t[2].left),j(u,"class","arrow svelte-a25ds"),D(u,"active",t[2].down),j(n,"class","joystick__cross svelte-a25ds"),j(h,"class","display"),j(f,"class","actions__button-section svelte-a25ds"),j(_,"class","actions__button-section actions__button-section--column svelte-a25ds"),j(p,"class","actions__block svelte-a25ds"),j(S,"class","actions__block svelte-a25ds"),j($,"class","joystick__actions svelte-a25ds"),j(e,"class","editor svelte-a25ds"),j(e,"tabindex","0")},m(o,L){O(o,e,L),k(e,n),k(n,s),k(n,r),k(n,l),k(n,c),k(n,i),k(n,a),k(n,u),k(e,d),k(e,$),k($,p),k(p,f),Et(m,f,null),k(f,g),k(f,h),Et(v,h,null),k(f,y),Et(x,f,null),k(p,b),k(p,_),Et(w,_,null),k($,C),k($,S),Et(T,S,null),k(S,q),Et(P,S,null),M=!0,I||(N=[R(s,"click",t[5]),R(l,"click",t[6]),R(i,"click",t[7]),R(u,"click",t[8]),R(e,"keydown",t[3])],I=!0)},p(t,[e]){(!M||4&e)&&D(s,"active",t[2].up),(!M||4&e)&&D(l,"active",t[2].right),(!M||4&e)&&D(i,"active",t[2].left),(!M||4&e)&&D(u,"active",t[2].down);const n={};1&e&&(n.onClick=t[9]),65536&e&&(n.$$scope={dirty:e,ctx:t}),m.$set(n);const r={};2&e&&(r.options=t[1]),v.$set(r);const o={};1&e&&(o.onClick=t[11]),65536&e&&(o.$$scope={dirty:e,ctx:t}),x.$set(o);const c={};1&e&&(c.onClick=t[12]),65536&e&&(c.$$scope={dirty:e,ctx:t}),w.$set(c);const a={};1&e&&(a.onClick=t[13]),65536&e&&(a.$$scope={dirty:e,ctx:t}),T.$set(a);const d={};1&e&&(d.onClick=t[14]),65536&e&&(d.$$scope={dirty:e,ctx:t}),P.$set(d)},i(t){M||(bt(m.$$.fragment,t),bt(v.$$.fragment,t),bt(x.$$.fragment,t),bt(w.$$.fragment,t),bt(T.$$.fragment,t),bt(P.$$.fragment,t),M=!0)},o(t){_t(m.$$.fragment,t),_t(v.$$.fragment,t),_t(x.$$.fragment,t),_t(w.$$.fragment,t),_t(T.$$.fragment,t),_t(P.$$.fragment,t),M=!1},d(t){t&&L(e),Pt(m),Pt(v),Pt(x),Pt(w),Pt(T),Pt(P),I=!1,o(N)}}}const Jn=t=>t?.at(0)||"нет данных";function Yn(t,e,n){let{controls:s}=e,{cursor:r}=e,{buttonTypes:o}=e;const l={up:!1,down:!1,left:!1,right:!1};return t.$$set=t=>{"controls"in t&&n(0,s=t.controls),"cursor"in t&&n(4,r=t.cursor),"buttonTypes"in t&&n(1,o=t.buttonTypes)},t.$$.update=()=>{17&t.$$.dirty&&r&&s.show((t=>t?.text))},[s,o,l,t=>{if(!t.key.startsWith("Arrow"))return;const e=t.key.replace("Arrow","").toLowerCase();n(2,l[e]=!0,l),setTimeout((()=>n(2,l[e]=!1,l)),300),s[e]()},r,()=>s.up(),()=>s.right(),()=>s.left(),()=>s.down(),()=>s.addButton({text:""},!0),({detail:[t]})=>{s.updateButton((()=>({text:t})))},()=>s.addButton({text:""}),()=>s.deleteButton(),()=>s.addLine(),()=>s.deleteLine()]}class Qn extends Mt{constructor(t){super(),jt(this,t,Yn,Kn,c,{controls:0,cursor:4,buttonTypes:1})}}function Vn(t,e,n){const s=t.slice();return s[2]=e[n],s[4]=n,s}function Xn(t,e,n){const s=t.slice();return s[5]=e[n],s[7]=n,s}function Zn(t){let e,n=Ct(t[0]),s=[];for(let e=0;e<n.length;e+=1)s[e]=es(Vn(t,n,e));return{c(){e=U("div");for(let t=0;t<s.length;t+=1)s[t].c();j(e,"class","keyboard svelte-rc69je")},m(t,n){O(t,e,n);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(e,null)},p(t,r){if(3&r){let o;for(n=Ct(t[0]),o=0;o<n.length;o+=1){const l=Vn(t,n,o);s[o]?s[o].p(l,r):(s[o]=es(l),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}},d(t){t&&L(e),T(s,t)}}}function ts(t){let e,n,s=t[5].text+"";return{c(){e=U("div"),n=q(s),j(e,"class","line__button svelte-rc69je"),D(e,"selected",t[1]&&t[1].y===t[4]&&t[1].x===t[7])},m(t,s){O(t,e,s),k(e,n)},p(t,r){1&r&&s!==(s=t[5].text+"")&&A(n,s),2&r&&D(e,"selected",t[1]&&t[1].y===t[4]&&t[1].x===t[7])},d(t){t&&L(e)}}}function es(t){let e,n,s=Ct(t[2]),r=[];for(let e=0;e<s.length;e+=1)r[e]=ts(Xn(t,s,e));return{c(){e=U("div");for(let t=0;t<r.length;t+=1)r[t].c();n=E(),j(e,"class","keyboard__line svelte-rc69je")},m(t,s){O(t,e,s);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null);k(e,n)},p(t,o){if(3&o){let l;for(s=Ct(t[2]),l=0;l<s.length;l+=1){const c=Xn(t,s,l);r[l]?r[l].p(c,o):(r[l]=ts(c),r[l].c(),r[l].m(e,n))}for(;l<r.length;l+=1)r[l].d(1);r.length=s.length}},d(t){t&&L(e),T(r,t)}}}function ns(e){let n,s=e[0].length>0&&Zn(e);return{c(){n=U("div"),s&&s.c(),j(n,"class","keyboard-wrapper svelte-rc69je")},m(t,e){O(t,n,e),s&&s.m(n,null)},p(t,[e]){t[0].length>0?s?s.p(t,e):(s=Zn(t),s.c(),s.m(n,null)):s&&(s.d(1),s=null)},i:t,o:t,d(t){t&&L(n),s&&s.d()}}}function ss(t,e,n){let{keyboard:s=[]}=e,{cursor:r=null}=e;return t.$$set=t=>{"keyboard"in t&&n(0,s=t.keyboard),"cursor"in t&&n(1,r=t.cursor)},[s,r]}class rs extends Mt{constructor(t){super(),jt(this,t,ss,ns,c,{keyboard:0,cursor:1})}}class os{#s=[[]];#r={y:0,x:0};#o={update:()=>{},build:()=>{}};#l;#c;constructor(t,e=3){this.#l=e,t&&(this.#s[0].push(t),this.#c=t)}#i(t){this.#o[t]?this.#o[t]():console.warn(`Событие "${t}" не существует, проверьте правильность написания.`)}build(t=(t=>t)){const e=this.#s.reduce(((e,n)=>{const s=n.filter(t);return s.length&&e.push(s),e}),[]);return this.#s=[[this.#c]],this.#r={x:0,y:0},e}on(t,e){this.#o[t]?this.#o[t]=()=>{e({state:this.#s,cursor:this.#r})}:console.warn(`Событие "${t}" не существует, проверьте правильность написания.`)}left(){0!==this.#r.x&&(this.#r.x--,this.#i("update"))}right(){this.#r.x<this.#s[this.#r.y].length-1&&(this.#r.x++,this.#i("update"))}up(){if(0!==this.#r.y){const t=this.#r.x===this.#s[this.#r.y].length-1;this.#r.y--,0===this.#s[this.#r.y].length?this.#r.x=0:(t||this.#r.x===this.#s[this.#r.y].length-1)&&(this.#r.x=this.#s[this.#r.y].length-1),this.#i("update")}}down(){if(this.#r.y<this.#s.length-1){const t=this.#r.x===this.#s[this.#r.y].length-1;this.#r.y++,0===this.#s[this.#r.y].length?this.#r.x=0:(t||this.#r.x>=this.#s[this.#r.y].length-1)&&(this.#r.x=this.#s[this.#r.y].length-1),this.#i("update")}}addLine(){const t=this.#c?[this.#c]:[];this.#s.push(t),this.#r.y=this.#s.length-1,this.#r.x=0,this.#i("update")}addButton(t,e=!1){if(this.#s[this.#r.y].length>=this.#l)return;const n=e?this.#r.x:this.#r.x+1;this.#s[this.#r.y].splice(n,0,t),this.#r.x=n,this.#i("update")}updateButton(t){const{x:e,y:n}=this.#r,s=this.#s[n]?.[e];s&&(this.#s[n].splice(e,1,t(s)),this.#i("update"))}show(t){const{x:e,y:n}=this.#r;return t?t(this.#s[n]?.[e]):this.#s[n]?.[e]}deleteButton(){const{x:t,y:e}=this.#r;this.#s[e]?.splice(t,1),this.#s[e].length?this.#s[e].length-1<t&&(this.#r.x=this.#s[e].length-1):(this.#s.splice(e,1),this.#r.x=0,this.#r.y=e-1),this.#i("update")}deleteLine(){const{y:t}=this.#r;this.#s.splice(t,1),this.#r.x=0,this.#r.y=t>0?t-1:0,this.#i("update")}reset(){this.#s=[[]],this.#r={y:0,x:0}}get keyboard(){return this.#s}get cursor(){return this.#r}}function ls(e){let n;return{c(){n=U("span"),n.textContent="Задержка",j(n,"slot","label"),j(n,"class","modal__label"),j(n,"for","delay")},m(t,e){O(t,n,e)},p:t,d(t){t&&L(n)}}}function cs(t){let e,n,s,r,o,l,c;return r=new Ve({props:{options:t[5],view:"label",selected:t[3].unit,width:"60"}}),{c(){e=U("div"),n=U("input"),s=E(),qt(r.$$.fragment),j(n,"id","delay"),j(n,"type","number"),j(n,"class","input--delay svelte-kh2duc"),j(e,"slot","elem"),j(e,"class","modal__option modal__option--time svelte-kh2duc")},m(i,a){O(i,e,a),k(e,n),B(n,t[3].delay),k(e,s),Et(r,e,null),o=!0,l||(c=R(n,"input",t[10]),l=!0)},p(t,e){8&e&&z(n.value)!==t[3].delay&&B(n,t[3].delay);const s={};8&e&&(s.selected=t[3].unit),r.$set(s)},i(t){o||(bt(r.$$.fragment,t),o=!0)},o(t){_t(r.$$.fragment,t),o=!1},d(t){t&&L(e),Pt(r),l=!1,c()}}}function is(e){let n;return{c(){n=U("span"),n.textContent="Сообщение",j(n,"slot","label"),j(n,"class","modal__label")},m(t,e){O(t,n,e)},p:t,d(t){t&&L(n)}}}function as(t){let e,n,s;return{c(){e=U("textarea"),j(e,"slot","elem"),j(e,"id","msg-text"),j(e,"placeholder","Текст сообщения")},m(r,o){O(r,e,o),B(e,t[3].message),n||(s=R(e,"input",t[11]),n=!0)},p(t,n){8&n&&B(e,t[3].message)},d(t){t&&L(e),n=!1,s()}}}function us(t){let e,n,s,r,o,l,c,i,a;return n=new rn({props:{$$slots:{elem:[cs],label:[ls]},$$scope:{ctx:t}}}),r=new rn({props:{$$slots:{elem:[as],label:[is]},$$scope:{ctx:t}}}),l=new rs({props:{keyboard:t[3].keyboard,cursor:t[2]}}),i=new Qn({props:{controls:t[6],cursor:t[2],buttonTypes:t[4]}}),{c(){e=U("div"),qt(n.$$.fragment),s=E(),qt(r.$$.fragment),o=E(),qt(l.$$.fragment),c=E(),qt(i.$$.fragment),j(e,"slot","content"),j(e,"class","modal__body svelte-kh2duc")},m(t,u){O(t,e,u),Et(n,e,null),k(e,s),Et(r,e,null),k(e,o),Et(l,e,null),k(e,c),Et(i,e,null),a=!0},p(t,e){const s={};8200&e&&(s.$$scope={dirty:e,ctx:t}),n.$set(s);const o={};8200&e&&(o.$$scope={dirty:e,ctx:t}),r.$set(o);const c={};8&e&&(c.keyboard=t[3].keyboard),4&e&&(c.cursor=t[2]),l.$set(c);const a={};4&e&&(a.cursor=t[2]),16&e&&(a.buttonTypes=t[4]),i.$set(a)},i(t){a||(bt(n.$$.fragment,t),bt(r.$$.fragment,t),bt(l.$$.fragment,t),bt(i.$$.fragment,t),a=!0)},o(t){_t(n.$$.fragment,t),_t(r.$$.fragment,t),_t(l.$$.fragment,t),_t(i.$$.fragment,t),a=!1},d(t){t&&L(e),Pt(n),Pt(r),Pt(l),Pt(i)}}}function ds(t){let e;return{c(){e=q("Сохранить")},m(t,n){O(t,e,n)},d(t){t&&L(e)}}}function $s(t){let e;return{c(){e=q("Закрыть")},m(t,n){O(t,e,n)},d(t){t&&L(e)}}}function ps(t){let e,n,s,r,o;return n=new Ge({props:{onClick:t[8],$$slots:{default:[ds]},$$scope:{ctx:t}}}),r=new Ge({props:{theme:"delete",onClick:t[9],$$slots:{default:[$s]},$$scope:{ctx:t}}}),{c(){e=U("div"),qt(n.$$.fragment),s=E(),qt(r.$$.fragment),j(e,"slot","actions"),j(e,"class","modal__actions svelte-kh2duc")},m(t,l){O(t,e,l),Et(n,e,null),k(e,s),Et(r,e,null),o=!0},p(t,e){const s={};11&e&&(s.onClick=t[8]),8192&e&&(s.$$scope={dirty:e,ctx:t}),n.$set(s);const o={};1&e&&(o.onClick=t[9]),8192&e&&(o.$$scope={dirty:e,ctx:t}),r.$set(o)},i(t){o||(bt(n.$$.fragment,t),bt(r.$$.fragment,t),o=!0)},o(t){_t(n.$$.fragment,t),_t(r.$$.fragment,t),o=!1},d(t){t&&L(e),Pt(n),Pt(r)}}}function fs(t){let e,n;return e=new Bn({props:{state:t[0],width:"620px",$$slots:{actions:[ps],content:[us]},$$scope:{ctx:t}}}),{c(){qt(e.$$.fragment)},m(t,s){Et(e,t,s),n=!0},p(t,[n]){const s={};1&n&&(s.state=t[0]),8223&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(bt(e.$$.fragment,t),n=!0)},o(t){_t(e.$$.fragment,t),n=!1},d(t){Pt(e,t)}}}function ms(t,e,n){let{state:s}=e,{onCreate:r}=e,{reminder:o={}}=e;const l=[{label:"сек",value:"seconds"},{label:"мин",value:"minutes"},{label:"ч",value:"hours"},{label:"д",value:"days"}],c=new os({text:""});let i=c.cursor;const a={delay:0,unit:l[2],message:"",keyboard:[]};let u={...structuredClone(a),...structuredClone(o)};c.on("update",(({state:t,cursor:e})=>{n(3,u.keyboard=t,u),n(2,i=e)}));let d=[[]];Z((async()=>{const{list:t}=await cn.aliases.list();n(4,d=t.map((t=>[t.name,t.action.value])))}));return t.$$set=t=>{"state"in t&&n(0,s=t.state),"onCreate"in t&&n(1,r=t.onCreate),"reminder"in t&&n(7,o=t.reminder)},t.$$.update=()=>{1&t.$$.dirty&&(s.isOpen||n(3,u=structuredClone(a)))},[s,r,i,u,d,l,c,o,()=>{n(3,u.keyboard=c.build((t=>!!t.text)),u),r(structuredClone(u)),n(0,s.isOpen=!1,s)},()=>{n(0,s.isOpen=!1,s)},function(){u.delay=z(this.value),n(3,u),n(0,s)},function(){u.message=this.value,n(3,u),n(0,s)}]}class gs extends Mt{constructor(t){super(),jt(this,t,ms,fs,c,{state:0,onCreate:1,reminder:7})}}function hs(e){let n;return{c(){n=U("span"),n.textContent="Задержка:",j(n,"slot","label"),j(n,"class","display__elem-label")},m(t,e){O(t,n,e)},p:t,d(t){t&&L(n)}}}function vs(t){let e,n,s=`${t[0].delay} ${t[0].unit.label}`;return{c(){e=U("span"),n=q(s),j(e,"slot","elem"),j(e,"class","display__elem-value")},m(t,s){O(t,e,s),k(e,n)},p(t,e){1&e&&s!==(s=`${t[0].delay} ${t[0].unit.label}`)&&A(n,s)},d(t){t&&L(e)}}}function ys(e){let n;return{c(){n=U("span"),n.textContent="Сообщение:",j(n,"slot","label"),j(n,"class","display__elem-label")},m(t,e){O(t,n,e)},p:t,d(t){t&&L(n)}}}function xs(t){let e,n,s=t[0].message+"";return{c(){e=U("span"),n=q(s),j(e,"slot","elem"),j(e,"class","display__elem-value")},m(t,s){O(t,e,s),k(e,n)},p(t,e){1&e&&s!==(s=t[0].message+"")&&A(n,s)},d(t){t&&L(e)}}}function bs(t){let e;return{c(){e=q("Редактировать сообщение")},m(t,n){O(t,e,n)},d(t){t&&L(e)}}}function _s(t){let e;return{c(){e=q("Удалить сообщение")},m(t,n){O(t,e,n)},d(t){t&&L(e)}}}function ws(t){let e,n,s,r,o,l,c,i,a,u,d,$,p,f,m;return s=new rn({props:{$$slots:{elem:[vs],label:[hs]},$$scope:{ctx:t}}}),o=new rn({props:{$$slots:{elem:[xs],label:[ys]},$$scope:{ctx:t}}}),c=new rs({props:{keyboard:t[0].keyboard}}),u=new Ge({props:{onClick:t[3],$$slots:{default:[bs]},$$scope:{ctx:t}}}),$=new Ge({props:{theme:"delete",onClick:t[4],$$slots:{default:[_s]},$$scope:{ctx:t}}}),f=new gs({props:{state:t[2],reminder:t[0],onCreate:t[5]}}),{c(){e=U("div"),n=U("div"),qt(s.$$.fragment),r=E(),qt(o.$$.fragment),l=E(),qt(c.$$.fragment),i=E(),a=U("div"),qt(u.$$.fragment),d=E(),qt($.$$.fragment),p=E(),qt(f.$$.fragment),j(n,"class","reminder__display svelte-zc68km"),j(a,"class","reminder__actions svelte-zc68km"),j(e,"class","reminder svelte-zc68km")},m(t,g){O(t,e,g),k(e,n),Et(s,n,null),k(n,r),Et(o,n,null),k(n,l),Et(c,n,null),k(e,i),k(e,a),Et(u,a,null),k(a,d),Et($,a,null),k(e,p),Et(f,e,null),m=!0},p(t,[e]){const n={};65&e&&(n.$$scope={dirty:e,ctx:t}),s.$set(n);const r={};65&e&&(r.$$scope={dirty:e,ctx:t}),o.$set(r);const l={};1&e&&(l.keyboard=t[0].keyboard),c.$set(l);const i={};4&e&&(i.onClick=t[3]),64&e&&(i.$$scope={dirty:e,ctx:t}),u.$set(i);const a={};3&e&&(a.onClick=t[4]),64&e&&(a.$$scope={dirty:e,ctx:t}),$.$set(a);const d={};4&e&&(d.state=t[2]),1&e&&(d.reminder=t[0]),3&e&&(d.onCreate=t[5]),f.$set(d)},i(t){m||(bt(s.$$.fragment,t),bt(o.$$.fragment,t),bt(c.$$.fragment,t),bt(u.$$.fragment,t),bt($.$$.fragment,t),bt(f.$$.fragment,t),m=!0)},o(t){_t(s.$$.fragment,t),_t(o.$$.fragment,t),_t(c.$$.fragment,t),_t(u.$$.fragment,t),_t($.$$.fragment,t),_t(f.$$.fragment,t),m=!1},d(t){t&&L(e),Pt(s),Pt(o),Pt(c),Pt(u),Pt($),Pt(f)}}}function ks(t,e,n){let{reminder:s}=e,{remindersWriter:r}=e;const o={isOpen:!1,title:"Редактор сообщение"};return t.$$set=t=>{"reminder"in t&&n(0,s=t.reminder),"remindersWriter"in t&&n(1,r=t.remindersWriter)},[s,r,o,()=>n(2,o.isOpen=!0,o),()=>r.removeReminder(s),t=>r.removeReminder(s,(e=>({...e,...t})))]}class Cs extends Mt{constructor(t){super(),jt(this,t,ks,ws,c,{reminder:0,remindersWriter:1})}}function Ss(t,e,n){const s=t.slice();return s[7]=e[n],s}function Os(t){let e,n,s,r,o,l,c,i,a,u,d,$;const p=[Ts,Ls],f=[];function m(t,e){return t[0].reminders.length?0:1}return s=m(t),r=f[s]=p[s](t),c=new Ge({props:{theme:"add",onClick:t[5],$$slots:{default:[qs]},$$scope:{ctx:t}}}),a=new Ge({props:{theme:"delete",onClick:t[6],$$slots:{default:[Es]},$$scope:{ctx:t}}}),d=new gs({props:{state:t[3],onCreate:t[4]}}),{c(){e=U("div"),n=U("div"),r.c(),o=E(),l=U("div"),qt(c.$$.fragment),i=E(),qt(a.$$.fragment),u=E(),qt(d.$$.fragment),j(n,"class","group__reminder-list svelte-qc5vd7"),j(l,"class","group__actions svelte-qc5vd7"),j(e,"class","group svelte-qc5vd7")},m(t,r){O(t,e,r),k(e,n),f[s].m(n,null),k(e,o),k(e,l),Et(c,l,null),k(l,i),Et(a,l,null),k(e,u),Et(d,e,null),$=!0},p(t,e){let o=s;s=m(t),s===o?f[s].p(t,e):(yt(),_t(f[o],1,1,(()=>{f[o]=null})),xt(),r=f[s],r?r.p(t,e):(r=f[s]=p[s](t),r.c()),bt(r,1),r.m(n,null));const l={};8&e&&(l.onClick=t[5]),1024&e&&(l.$$scope={dirty:e,ctx:t}),c.$set(l);const i={};3&e&&(i.onClick=t[6]),1024&e&&(i.$$scope={dirty:e,ctx:t}),a.$set(i);const u={};8&e&&(u.state=t[3]),d.$set(u)},i(t){$||(bt(r),bt(c.$$.fragment,t),bt(a.$$.fragment,t),bt(d.$$.fragment,t),$=!0)},o(t){_t(r),_t(c.$$.fragment,t),_t(a.$$.fragment,t),_t(d.$$.fragment,t),$=!1},d(t){t&&L(e),f[s].d(),Pt(c),Pt(a),Pt(d)}}}function Ls(e){let n,s;return n=new Pn({}),{c(){qt(n.$$.fragment)},m(t,e){Et(n,t,e),s=!0},p:t,i(t){s||(bt(n.$$.fragment,t),s=!0)},o(t){_t(n.$$.fragment,t),s=!1},d(t){Pt(n,t)}}}function Ts(t){let e,n,s=[],r=new Map,o=Ct(t[0].reminders);const l=t=>t[7].id;for(let e=0;e<o.length;e+=1){let n=Ss(t,o,e),c=l(n);r.set(c,s[e]=Us(c,n))}return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=P()},m(t,r){for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(t,r);O(t,e,r),n=!0},p(t,n){5&n&&(o=Ct(t[0].reminders),yt(),s=Lt(s,n,l,1,t,o,r,e.parentNode,Ot,Us,e,Ss),xt())},i(t){if(!n){for(let t=0;t<o.length;t+=1)bt(s[t]);n=!0}},o(t){for(let t=0;t<s.length;t+=1)_t(s[t]);n=!1},d(t){t&&L(e);for(let e=0;e<s.length;e+=1)s[e].d(t)}}}function Us(t,e){let n,s,r;return s=new Cs({props:{reminder:e[7],remindersWriter:e[2]}}),{key:t,first:null,c(){n=P(),qt(s.$$.fragment),this.first=n},m(t,e){O(t,n,e),Et(s,t,e),r=!0},p(t,n){e=t;const r={};1&n&&(r.reminder=e[7]),4&n&&(r.remindersWriter=e[2]),s.$set(r)},i(t){r||(bt(s.$$.fragment,t),r=!0)},o(t){_t(s.$$.fragment,t),r=!1},d(t){t&&L(n),Pt(s,t)}}}function qs(t){let e;return{c(){e=q("Добавить сообщение")},m(t,n){O(t,e,n)},d(t){t&&L(e)}}}function Es(t){let e;return{c(){e=q("Удалить группу")},m(t,n){O(t,e,n)},d(t){t&&L(e)}}}function Ps(t){let e,n,s=t[0]&&Os(t);return{c(){s&&s.c(),e=P()},m(t,r){s&&s.m(t,r),O(t,e,r),n=!0},p(t,[n]){t[0]?s?(s.p(t,n),1&n&&bt(s,1)):(s=Os(t),s.c(),bt(s,1),s.m(e.parentNode,e)):s&&(yt(),_t(s,1,1,(()=>{s=null})),xt())},i(t){n||(bt(s),n=!0)},o(t){_t(s),n=!1},d(t){t&&L(e),s&&s.d(t)}}}function Rs(t,e,n){let{group:s}=e,{remove:r}=e,{remindersWriter:o}=e;const l={isOpen:!1,title:"Создать сообщение"};return t.$$set=t=>{"group"in t&&n(0,s=t.group),"remove"in t&&n(1,r=t.remove),"remindersWriter"in t&&n(2,o=t.remindersWriter)},[s,r,o,l,t=>{o.createReminder(s.id,t)},()=>n(3,l.isOpen=!0,l),()=>r(s.id)]}class js extends Mt{constructor(t){super(),jt(this,t,Rs,Ps,c,{group:0,remove:1,remindersWriter:2})}}function Ms(t,e,n){const s=t.slice();return s[18]=e[n],s}function Is(t){let e;return{c(){e=q("Новая группа")},m(t,n){O(t,e,n)},d(t){t&&L(e)}}}function Ns(t){let e,n,s;return n=new Ge({props:{disabled:!!t[2],onClick:t[8],$$slots:{default:[Is]},$$scope:{ctx:t}}}),{c(){e=U("div"),qt(n.$$.fragment),j(e,"slot","label")},m(t,r){O(t,e,r),Et(n,e,null),s=!0},p(t,e){const s={};4&e&&(s.disabled=!!t[2]),2097152&e&&(s.$$scope={dirty:e,ctx:t}),n.$set(s)},i(t){s||(bt(n.$$.fragment,t),s=!0)},o(t){_t(n.$$.fragment,t),s=!1},d(t){t&&L(e),Pt(n)}}}function zs(t){let e,n;return{c(){e=U("div"),n=q(t[2]),j(e,"class","error svelte-10gao42")},m(t,s){O(t,e,s),k(e,n)},p(t,e){4&e&&A(n,t[2])},d(t){t&&L(e)}}}function As(t){let e,n,s,r,l,c,i=t[2]&&zs(t);return{c(){e=U("div"),n=U("input"),r=E(),i&&i.c(),j(n,"type","text"),j(n,"class",s=h(t[2]?"input error":"input")+" svelte-10gao42"),j(e,"slot","elem")},m(s,o){O(s,e,o),k(e,n),t[14](n),B(n,t[1]),k(e,r),i&&i.m(e,null),l||(c=[R(n,"input",t[15]),R(n,"input",t[7]),R(n,"keydown",t[8])],l=!0)},p(t,r){4&r&&s!==(s=h(t[2]?"input error":"input")+" svelte-10gao42")&&j(n,"class",s),2&r&&n.value!==t[1]&&B(n,t[1]),t[2]?i?i.p(t,r):(i=zs(t),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},d(n){n&&L(e),t[14](null),i&&i.d(),l=!1,o(c)}}}function Bs(t,e){let n,s,r,o,l,c=e[18].name+"";function i(){return e[16](e[18])}return{key:t,first:null,c(){n=U("div"),s=q(c),r=E(),j(n,"class","tab-list__item svelte-10gao42"),D(n,"tab-list__item--active",e[18].id===e[4]?.id),this.first=n},m(t,e){O(t,n,e),k(n,s),k(n,r),o||(l=R(n,"click",i),o=!0)},p(t,r){e=t,1&r&&c!==(c=e[18].name+"")&&A(s,c),17&r&&D(n,"tab-list__item--active",e[18].id===e[4]?.id)},d(t){t&&L(n),o=!1,l()}}}function Ws(t){let e;return{c(){e=q("Сохранить изменения")},m(t,n){O(t,e,n)},d(t){t&&L(e)}}}function Ds(t){let e,n,s,r,o,l,c,i,a,u,d,$,p=[],f=new Map;s=new rn({props:{$$slots:{elem:[As],label:[Ns]},$$scope:{ctx:t}}});let m=Ct(t[0]);const g=t=>t[18].id;for(let e=0;e<m.length;e+=1){let n=Ms(t,m,e),s=g(n);f.set(s,p[e]=Bs(s,n))}return i=new js({props:{group:t[4],remove:t[9],remindersWriter:t[6]}}),d=new Ge({props:{theme:"add",onClick:t[10],$$slots:{default:[Ws]},$$scope:{ctx:t}}}),{c(){e=U("section"),n=U("div"),qt(s.$$.fragment),r=E(),o=U("div"),l=U("dir");for(let t=0;t<p.length;t+=1)p[t].c();c=E(),qt(i.$$.fragment),a=E(),u=U("div"),qt(d.$$.fragment),j(n,"class","group__actions svelte-10gao42"),j(l,"class","tab-list svelte-10gao42"),j(o,"class","group__list"),j(u,"class","reminders__actions"),j(e,"class","reminders")},m(t,f){O(t,e,f),k(e,n),Et(s,n,null),k(e,r),k(e,o),k(o,l);for(let t=0;t<p.length;t+=1)p[t]&&p[t].m(l,null);k(o,c),Et(i,o,null),k(e,a),k(e,u),Et(d,u,null),$=!0},p(t,e){const n={};2097166&e&&(n.$$scope={dirty:e,ctx:t}),s.$set(n),2065&e&&(m=Ct(t[0]),p=Lt(p,e,g,1,t,m,f,l,St,Bs,null,Ms));const r={};16&e&&(r.group=t[4]),i.$set(r);const o={};2097152&e&&(o.$$scope={dirty:e,ctx:t}),d.$set(o)},i(t){$||(bt(s.$$.fragment,t),bt(i.$$.fragment,t),bt(d.$$.fragment,t),$=!0)},o(t){_t(s.$$.fragment,t),_t(i.$$.fragment,t),_t(d.$$.fragment,t),$=!1},d(t){t&&L(e),Pt(s);for(let t=0;t<p.length;t+=1)p[t].d();Pt(i),Pt(d)}}}function Hs(t){let e,n;return e=new ze({props:{h1:"Напоминания",hasUnsavedChanges:t[5],$$slots:{default:[Ds]},$$scope:{ctx:t}}}),{c(){qt(e.$$.fragment)},m(t,s){Et(e,t,s),n=!0},p(t,[n]){const s={};32&n&&(s.hasUnsavedChanges=t[5]),2097183&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(bt(e.$$.fragment,t),n=!0)},o(t){_t(e.$$.fragment,t),n=!1},d(t){Pt(e,t)}}}function Fs(t,e,n){let s,r;const o=new qn;let l=[],c=[];o.update((t=>{n(0,c=t)}));let i="",a=new Set,u="",d=null,$=null;const p=t=>{n(13,d=t)};Z((async()=>{const t=await cn.reminders.list();o.init(t),n(12,l=t),a=new Set(t.map((t=>t.id))),c.length&&n(13,d=c[0].id)}));return t.$$.update=()=>{4097&t.$$.dirty&&n(5,s=!$n(l,c,((t,e)=>t.id===e.id))),8193&t.$$.dirty&&n(4,r=c.find((t=>t.id===d)))},[c,i,u,$,r,s,o,()=>{a.has(i)?n(2,u="Такое имя уже занято, выберете другое имя"):n(2,u="")},t=>{if(!i)return void $.focus();if("click"!==t.type&&"Enter"!==t.key)return;const e=o.createGroup(i);a.add(i),n(13,d=e.id),n(1,i=""),$.blur()},t=>{const{name:e}=o.removeGroup(t);a.delete(e),t===d&&n(13,d=c[0]?c[0].id:null)},async()=>{try{const t=pn(c,(t=>t.startsWith("_")));await cn.reminders.create(t),n(12,l=await cn.reminders.list()),a=new Set(l.map((t=>t.id)))}catch(t){console.error(t)}},p,l,d,function(t){rt[t?"unshift":"push"]((()=>{$=t,n(3,$)}))},function(){i=this.value,n(1,i)},t=>p(t.id)]}function Gs(t){let e;return{c(){e=q("Delete")},m(t,n){O(t,e,n)},d(t){t&&L(e)}}}function Ks(t){let e,n,s,r,o,l,c,i,a,u,d,$,p,f,m=t[0].type+"",g=("text"===t[0].type?t[0].data:t[0].filename)+"";return d=new Ge({props:{theme:"delete",onClick:t[5],$$slots:{default:[Gs]},$$scope:{ctx:t}}}),{c(){e=U("div"),n=U("div"),s=q(m),r=E(),o=U("div"),l=q(g),c=E(),i=U("input"),u=E(),qt(d.$$.fragment),j(n,"class","part__type svelte-19vyubm"),j(o,"class","text"),j(i,"type","number"),j(i,"class","part__order"),i.value=a=t[0].order,j(e,"class","part svelte-19vyubm"),D(e,"part--odd",t[1]%2!=0)},m(a,m){O(a,e,m),k(e,n),k(n,s),k(e,r),k(e,o),k(o,l),k(e,c),k(e,i),k(e,u),Et(d,e,null),$=!0,p||(f=R(i,"input",t[4]),p=!0)},p(t,[n]){(!$||1&n)&&m!==(m=t[0].type+"")&&A(s,m),(!$||1&n)&&g!==(g=("text"===t[0].type?t[0].data:t[0].filename)+"")&&A(l,g),(!$||1&n&&a!==(a=t[0].order)&&i.value!==a)&&(i.value=a);const r={};9&n&&(r.onClick=t[5]),64&n&&(r.$$scope={dirty:n,ctx:t}),d.$set(r),(!$||2&n)&&D(e,"part--odd",t[1]%2!=0)},i(t){$||(bt(d.$$.fragment,t),$=!0)},o(t){_t(d.$$.fragment,t),$=!1},d(t){t&&L(e),Pt(d),p=!1,f()}}}function Js(t,e,n){let{part:s={}}=e,{number:r}=e,{onUpdate:o}=e,{onRemove:l}=e;return t.$$set=t=>{"part"in t&&n(0,s=t.part),"number"in t&&n(1,r=t.number),"onUpdate"in t&&n(2,o=t.onUpdate),"onRemove"in t&&n(3,l=t.onRemove)},[s,r,o,l,t=>o({id:s.id,order:t.target.value}),()=>l(s)]}class Ys extends Mt{constructor(t){super(),jt(this,t,Js,Ks,c,{part:0,number:1,onUpdate:2,onRemove:3})}}function Qs(t,e,n){const s=t.slice();return s[12]=e[n],s}function Vs(e){let n;return{c(){n=U("label"),n.textContent="Тип сообщения",j(n,"slot","label"),j(n,"for","msg-type")},m(t,e){O(t,n,e)},p:t,d(t){t&&L(n)}}}function Xs(e){let n,s,r,o=e[12]+"";return{c(){n=U("option"),s=q(o),r=E(),n.__value=e[12],B(n,n.__value)},m(t,e){O(t,n,e),k(n,s),k(n,r)},p:t,d(t){t&&L(n)}}}function Zs(t){let e,n,s,r=Ct(t[3]),l=[];for(let e=0;e<r.length;e+=1)l[e]=Xs(Qs(t,r,e));return{c(){e=U("select");for(let t=0;t<l.length;t+=1)l[t].c();j(e,"slot","elem"),j(e,"id","msg-type"),j(e,"class","svelte-99c4od"),void 0===t[1].type&&at((()=>t[8].call(e)))},m(r,o){O(r,e,o);for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(e,null);W(e,t[1].type,!0),n||(s=[R(e,"change",t[8]),R(e,"change",t[9])],n=!0)},p(t,n){if(8&n){let s;for(r=Ct(t[3]),s=0;s<r.length;s+=1){const o=Qs(t,r,s);l[s]?l[s].p(o,n):(l[s]=Xs(o),l[s].c(),l[s].m(e,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=r.length}10&n&&W(e,t[1].type)},d(t){t&&L(e),T(l,t),n=!1,o(s)}}}function tr(t){let e,n;return e=new rn({props:{$$slots:{elem:[or],label:[rr]},$$scope:{ctx:t}}}),{c(){qt(e.$$.fragment)},m(t,s){Et(e,t,s),n=!0},p(t,n){const s={};32768&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(bt(e.$$.fragment,t),n=!0)},o(t){_t(e.$$.fragment,t),n=!1},d(t){Pt(e,t)}}}function er(t){let e,n;return e=new rn({props:{$$slots:{elem:[cr],label:[lr]},$$scope:{ctx:t}}}),{c(){qt(e.$$.fragment)},m(t,s){Et(e,t,s),n=!0},p(t,n){const s={};32768&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(bt(e.$$.fragment,t),n=!0)},o(t){_t(e.$$.fragment,t),n=!1},d(t){Pt(e,t)}}}function nr(t){let e,n;return e=new rn({props:{$$slots:{elem:[ar],label:[ir]},$$scope:{ctx:t}}}),{c(){qt(e.$$.fragment)},m(t,s){Et(e,t,s),n=!0},p(t,n){const s={};32768&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(bt(e.$$.fragment,t),n=!0)},o(t){_t(e.$$.fragment,t),n=!1},d(t){Pt(e,t)}}}function sr(t){let e,n;return e=new rn({props:{$$slots:{elem:[dr],label:[ur]},$$scope:{ctx:t}}}),{c(){qt(e.$$.fragment)},m(t,s){Et(e,t,s),n=!0},p(t,n){const s={};32770&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(bt(e.$$.fragment,t),n=!0)},o(t){_t(e.$$.fragment,t),n=!1},d(t){Pt(e,t)}}}function rr(e){let n;return{c(){n=U("label"),n.textContent="Ваше видео",j(n,"slot","label"),j(n,"for","msg-video")},m(t,e){O(t,n,e)},p:t,d(t){t&&L(n)}}}function or(e){let n,s,r;return{c(){n=U("input"),j(n,"slot","elem"),j(n,"type","file"),j(n,"accept",".mp4")},m(t,o){O(t,n,o),s||(r=R(n,"change",e[4]),s=!0)},p:t,d(t){t&&L(n),s=!1,r()}}}function lr(e){let n;return{c(){n=U("label"),n.textContent="Ваше аудио",j(n,"slot","label"),j(n,"for","msg-audio")},m(t,e){O(t,n,e)},p:t,d(t){t&&L(n)}}}function cr(e){let n,s,r;return{c(){n=U("input"),j(n,"slot","elem"),j(n,"type","file"),j(n,"accept",".mp3, .aac")},m(t,o){O(t,n,o),s||(r=R(n,"change",e[4]),s=!0)},p:t,d(t){t&&L(n),s=!1,r()}}}function ir(e){let n;return{c(){n=U("label"),n.textContent="Ваше изображение",j(n,"slot","label"),j(n,"for","msg-img")},m(t,e){O(t,n,e)},p:t,d(t){t&&L(n)}}}function ar(e){let n,s,r;return{c(){n=U("input"),j(n,"slot","elem"),j(n,"id","msg-img"),j(n,"type","file"),j(n,"accept","image/png, image/jpeg")},m(t,o){O(t,n,o),s||(r=R(n,"change",e[4]),s=!0)},p:t,d(t){t&&L(n),s=!1,r()}}}function ur(e){let n;return{c(){n=U("label"),n.textContent="Ваш текст",j(n,"slot","label"),j(n,"for","msg-text")},m(t,e){O(t,n,e)},p:t,d(t){t&&L(n)}}}function dr(t){let e,n,s;return{c(){e=U("textarea"),j(e,"slot","elem"),j(e,"id","msg-text"),j(e,"placeholder","Текст сообщения")},m(r,o){O(r,e,o),B(e,t[1].data),n||(s=R(e,"input",t[10]),n=!0)},p(t,n){10&n&&B(e,t[1].data)},d(t){t&&L(e),n=!1,s()}}}function $r(t){let e,n;return{c(){e=U("div"),n=q(t[2]),j(e,"class","error svelte-99c4od")},m(t,s){O(t,e,s),k(e,n)},p(t,e){4&e&&A(n,t[2])},d(t){t&&L(e)}}}function pr(e){let n;return{c(){n=U("label"),n.textContent="Порядковый номер",j(n,"slot","label"),j(n,"for","order")},m(t,e){O(t,n,e)},p:t,d(t){t&&L(n)}}}function fr(t){let e,n,s;return{c(){e=U("input"),j(e,"slot","elem"),j(e,"id","order"),j(e,"type","number"),j(e,"class","svelte-99c4od")},m(r,o){O(r,e,o),B(e,t[1].order),n||(s=R(e,"input",t[11]),n=!0)},p(t,n){10&n&&z(e.value)!==t[1].order&&B(e,t[1].order)},d(t){t&&L(e),n=!1,s()}}}function mr(t){let e,n,s,r,o,l,c,i,a,u,d,$;s=new rn({props:{$$slots:{elem:[Zs],label:[Vs]},$$scope:{ctx:t}}});const p=[sr,nr,er,tr],f=[];function m(t,e){return"text"===t[1].type?0:"image"===t[1].type?1:"audio"===t[1].type?2:"video"===t[1].type?3:-1}~(l=m(t))&&(c=f[l]=p[l](t));let g=t[2]&&$r(t);return d=new rn({props:{$$slots:{elem:[fr],label:[pr]},$$scope:{ctx:t}}}),{c(){e=U("div"),n=U("div"),qt(s.$$.fragment),r=E(),o=U("div"),c&&c.c(),i=E(),g&&g.c(),a=E(),u=U("div"),qt(d.$$.fragment),j(n,"class","message-editor__type svelte-99c4od"),j(o,"class","message-editor__value"),j(u,"class","message-editor__order svelte-99c4od"),j(e,"slot","content"),j(e,"class","message-editor")},m(t,c){O(t,e,c),k(e,n),Et(s,n,null),k(e,r),k(e,o),~l&&f[l].m(o,null),k(o,i),g&&g.m(o,null),k(e,a),k(e,u),Et(d,u,null),$=!0},p(t,e){const n={};32774&e&&(n.$$scope={dirty:e,ctx:t}),s.$set(n);let r=l;l=m(t),l===r?~l&&f[l].p(t,e):(c&&(yt(),_t(f[r],1,1,(()=>{f[r]=null})),xt()),~l?(c=f[l],c?c.p(t,e):(c=f[l]=p[l](t),c.c()),bt(c,1),c.m(o,i)):c=null),t[2]?g?g.p(t,e):(g=$r(t),g.c(),g.m(o,null)):g&&(g.d(1),g=null);const a={};32770&e&&(a.$$scope={dirty:e,ctx:t}),d.$set(a)},i(t){$||(bt(s.$$.fragment,t),bt(c),bt(d.$$.fragment,t),$=!0)},o(t){_t(s.$$.fragment,t),_t(c),_t(d.$$.fragment,t),$=!1},d(t){t&&L(e),Pt(s),~l&&f[l].d(),g&&g.d(),Pt(d)}}}function gr(t){let e;return{c(){e=q("Сохранить")},m(t,n){O(t,e,n)},d(t){t&&L(e)}}}function hr(t){let e;return{c(){e=q("Закрыть")},m(t,n){O(t,e,n)},d(t){t&&L(e)}}}function vr(t){let e,n,s,r,o;return n=new Ge({props:{onClick:t[5],$$slots:{default:[gr]},$$scope:{ctx:t}}}),r=new Ge({props:{onClick:t[7],$$slots:{default:[hr]},$$scope:{ctx:t}}}),{c(){e=U("div"),qt(n.$$.fragment),s=E(),qt(r.$$.fragment),j(e,"slot","actions"),j(e,"class","message-editor__button svelte-99c4od")},m(t,l){O(t,e,l),Et(n,e,null),k(e,s),Et(r,e,null),o=!0},p(t,e){const s={};32768&e&&(s.$$scope={dirty:e,ctx:t}),n.$set(s);const o={};1&e&&(o.onClick=t[7]),32768&e&&(o.$$scope={dirty:e,ctx:t}),r.$set(o)},i(t){o||(bt(n.$$.fragment,t),bt(r.$$.fragment,t),o=!0)},o(t){_t(n.$$.fragment,t),_t(r.$$.fragment,t),o=!1},d(t){t&&L(e),Pt(n),Pt(r)}}}function yr(t){let e,n;return e=new Bn({props:{state:t[0],width:"620px",$$slots:{actions:[vr],content:[mr]},$$scope:{ctx:t}}}),{c(){qt(e.$$.fragment)},m(t,s){Et(e,t,s),n=!0},p(t,[n]){const s={};1&n&&(s.state=t[0]),32775&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(bt(e.$$.fragment,t),n=!0)},o(t){_t(e.$$.fragment,t),n=!1},d(t){Pt(e,t)}}}function xr(t,e,n){let{state:s}=e,{onCreate:r}=e;const o=["text","image","audio","video"],l={type:"text",data:"",order:0};let c="";return t.$$set=t=>{"state"in t&&n(0,s=t.state),"onCreate"in t&&n(6,r=t.onCreate)},[s,l,c,o,t=>{n(2,c="");const e=t.target.files?.[0];e&&(n(1,l.size=e.size/1024/1024,l),n(1,l.filename=e.name,l),n(1,l.data=e,l),l.size>10&&n(2,c="Размер файла превышает 10мб. Выберете файл допустимого размера."))},async()=>{const t=l.type;if(l.data){if("text"===t)r({part:structuredClone(l)});else{if(l.size>10)return;const e=new FormData;e.append("type",t),e.append("data",l.data),n(1,l.data=l.filename,l),r({upload:async()=>await cn.files.upload(e),part:structuredClone(l)})}n(1,l.type="text",l),n(1,l.data="",l),n(1,l.order+=1,l),n(1,l.filename="",l),n(1,l.size=0,l),n(0,s.isOpen=!1,s),n(0,s.title="",s)}else n(2,c="text"===t?"Сообщение не может быть пустым, добавьте необходимый текст.":"Вы не прикрепили файл.")},r,()=>n(0,s.isOpen=!1,s),function(){l.type=function(t){const e=t.querySelector(":checked");return e&&e.__value}(this),n(1,l),n(3,o)},()=>n(2,c=""),function(){l.data=this.value,n(1,l),n(3,o)},function(){l.order=z(this.value),n(1,l),n(3,o)}]}class br extends Mt{constructor(t){super(),jt(this,t,xr,yr,c,{state:0,onCreate:6})}}function _r(t){let e,n,s,r,o;return n=new rs({props:{keyboard:t[1],cursor:t[2]}}),r=new Qn({props:{controls:t[4],cursor:t[2],buttonTypes:t[3]}}),{c(){e=U("div"),qt(n.$$.fragment),s=E(),qt(r.$$.fragment),j(e,"slot","content"),j(e,"class","modal__content")},m(t,l){O(t,e,l),Et(n,e,null),k(e,s),Et(r,e,null),o=!0},p(t,e){const s={};2&e&&(s.keyboard=t[1]),4&e&&(s.cursor=t[2]),n.$set(s);const o={};4&e&&(o.cursor=t[2]),8&e&&(o.buttonTypes=t[3]),r.$set(o)},i(t){o||(bt(n.$$.fragment,t),bt(r.$$.fragment,t),o=!0)},o(t){_t(n.$$.fragment,t),_t(r.$$.fragment,t),o=!1},d(t){t&&L(e),Pt(n),Pt(r)}}}function wr(t){let e;return{c(){e=q("Сохранить")},m(t,n){O(t,e,n)},d(t){t&&L(e)}}}function kr(t){let e;return{c(){e=q("Закрыть")},m(t,n){O(t,e,n)},d(t){t&&L(e)}}}function Cr(t){let e,n,s,r,o;return n=new Ge({props:{onClick:t[5],$$slots:{default:[wr]},$$scope:{ctx:t}}}),r=new Ge({props:{onClick:t[7],$$slots:{default:[kr]},$$scope:{ctx:t}}}),{c(){e=U("div"),qt(n.$$.fragment),s=E(),qt(r.$$.fragment),j(e,"slot","actions"),j(e,"class","modal__actions svelte-xn3vl")},m(t,l){O(t,e,l),Et(n,e,null),k(e,s),Et(r,e,null),o=!0},p(t,e){const s={};256&e&&(s.$$scope={dirty:e,ctx:t}),n.$set(s);const o={};1&e&&(o.onClick=t[7]),256&e&&(o.$$scope={dirty:e,ctx:t}),r.$set(o)},i(t){o||(bt(n.$$.fragment,t),bt(r.$$.fragment,t),o=!0)},o(t){_t(n.$$.fragment,t),_t(r.$$.fragment,t),o=!1},d(t){t&&L(e),Pt(n),Pt(r)}}}function Sr(t){let e,n;return e=new Bn({props:{state:t[0],width:"620px",$$slots:{actions:[Cr],content:[_r]},$$scope:{ctx:t}}}),{c(){qt(e.$$.fragment)},m(t,s){Et(e,t,s),n=!0},p(t,[n]){const s={};1&n&&(s.state=t[0]),271&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(bt(e.$$.fragment,t),n=!0)},o(t){_t(e.$$.fragment,t),n=!1},d(t){Pt(e,t)}}}function Or(t,e,n){let{state:s}=e,{onCreate:r}=e;const o=new os({text:""});let l=o.keyboard,c=o.cursor;o.on("update",(({state:t,cursor:e})=>{n(1,l=t),n(2,c=e)}));let i=[];Z((async()=>{const{list:t}=await cn.aliases.list();n(3,i=t.map((t=>[t.name,t.action.value])))}));return t.$$set=t=>{"state"in t&&n(0,s=t.state),"onCreate"in t&&n(6,r=t.onCreate)},[s,l,c,i,o,()=>{const t=o.build((t=>!!t.text));r(t),n(0,s.isOpen=!1,s),n(0,s.title="",s)},r,()=>n(0,s.isOpen=!1,s)]}class Lr extends Mt{constructor(t){super(),jt(this,t,Or,Sr,c,{state:0,onCreate:6})}}function Tr(t,e,n){const s=t.slice();return s[10]=e[n],s}function Ur(t,e){let n,s,r,o,l,c,i,a=e[10].label+"";return l=N(e[8][0]),{key:t,first:null,c(){n=U("label"),s=U("input"),r=E(),o=q(a),j(s,"type","radio"),s.__value=e[10].id,B(s,s.__value),l.p(s),this.first=n},m(t,l){O(t,n,l),k(n,s),s.checked=s.__value===e[2],k(n,r),k(n,o),c||(i=R(s,"change",e[7]),c=!0)},p(t,n){e=t,4&n&&(s.checked=s.__value===e[2])},d(t){t&&L(n),l.r(),c=!1,i()}}}function qr(t){let e,n,s,r;return{c(){e=U("div"),n=U("input"),j(n,"type","text"),j(e,"class","input__block")},m(o,l){O(o,e,l),k(e,n),B(n,t[1]),s||(r=R(n,"input",t[9]),s=!0)},p(t,e){2&e&&n.value!==t[1]&&B(n,t[1])},d(t){t&&L(e),s=!1,r()}}}function Er(t){let e,n,s,r=[],o=new Map,l=[1,2].includes(t[2]),c=Ct(t[3]);const i=t=>t[10].id;for(let e=0;e<c.length;e+=1){let n=Tr(t,c,e),s=i(n);o.set(s,r[e]=Ur(s,n))}let a=l&&qr(t);return{c(){e=U("div"),n=U("div");for(let t=0;t<r.length;t+=1)r[t].c();s=E(),a&&a.c(),j(n,"class","radio__block"),j(e,"slot","content")},m(t,o){O(t,e,o),k(e,n);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(n,null);k(e,s),a&&a.m(e,null)},p(t,s){12&s&&(c=Ct(t[3]),r=Lt(r,s,i,1,t,c,o,n,St,Ur,null,Tr)),4&s&&(l=[1,2].includes(t[2])),l?a?a.p(t,s):(a=qr(t),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},d(t){t&&L(e);for(let t=0;t<r.length;t+=1)r[t].d();a&&a.d()}}}function Pr(t){let e;return{c(){e=q("Сохранить")},m(t,n){O(t,e,n)},d(t){t&&L(e)}}}function Rr(t){let e;return{c(){e=q("Закрыть")},m(t,n){O(t,e,n)},d(t){t&&L(e)}}}function jr(t){let e,n,s,r,o;return n=new Ge({props:{onClick:t[4],$$slots:{default:[Pr]},$$scope:{ctx:t}}}),r=new Ge({props:{theme:"delete",onClick:t[6],$$slots:{default:[Rr]},$$scope:{ctx:t}}}),{c(){e=U("div"),qt(n.$$.fragment),s=E(),qt(r.$$.fragment),j(e,"slot","actions"),j(e,"class","modal__actions svelte-xn3vl")},m(t,l){O(t,e,l),Et(n,e,null),k(e,s),Et(r,e,null),o=!0},p(t,e){const s={};8192&e&&(s.$$scope={dirty:e,ctx:t}),n.$set(s);const o={};5&e&&(o.onClick=t[6]),8192&e&&(o.$$scope={dirty:e,ctx:t}),r.$set(o)},i(t){o||(bt(n.$$.fragment,t),bt(r.$$.fragment,t),o=!0)},o(t){_t(n.$$.fragment,t),_t(r.$$.fragment,t),o=!1},d(t){t&&L(e),Pt(n),Pt(r)}}}function Mr(t){let e,n;return e=new Bn({props:{state:t[0],width:"620px",$$slots:{actions:[jr],content:[Er]},$$scope:{ctx:t}}}),{c(){qt(e.$$.fragment)},m(t,s){Et(e,t,s),n=!0},p(t,[n]){const s={};1&n&&(s.state=t[0]),8199&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(bt(e.$$.fragment,t),n=!0)},o(t){_t(e.$$.fragment,t),n=!1},d(t){Pt(e,t)}}}function Ir(t,e,n){let{state:s}=e,{onCreate:r}=e,o="",l=null;const c=[{id:0,label:"Пользователь отправил любое сообщение",handler:t=>!!t},{id:1,label:"Сообщение пользователя содержит текст",handler:t=>t.includes(o)},{id:2,label:"Сообщение пользователя не содержит текст",handler:t=>!!t}];return t.$$set=t=>{"state"in t&&n(0,s=t.state),"onCreate"in t&&n(5,r=t.onCreate)},[s,o,l,c,()=>{let t=null;const e=c.find((t=>t.id===l));e&&(t=e.handler),r(t),n(0,s.isOpen=!1,s),n(0,s.title="",s)},r,()=>{n(2,l=null),n(0,s.isOpen=!1,s),n(0,s.title="",s)},function(){l=this.__value,n(2,l)},[[]],function(){o=this.value,n(1,o)}]}class Nr extends Mt{constructor(t){super(),jt(this,t,Ir,Mr,c,{state:0,onCreate:5})}}function zr(t,e,n){const s=t.slice();return s[13]=e[n],s[15]=n,s}function Ar(e){let n,s;return n=new Pn({}),{c(){qt(n.$$.fragment)},m(t,e){Et(n,t,e),s=!0},p:t,i(t){s||(bt(n.$$.fragment,t),s=!0)},o(t){_t(n.$$.fragment,t),s=!1},d(t){Pt(n,t)}}}function Br(t){let e,n,s=[],r=new Map,o=Ct(t[0].message);const l=t=>t[13].id;for(let e=0;e<o.length;e+=1){let n=zr(t,o,e),c=l(n);r.set(c,s[e]=Wr(c,n))}return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=P()},m(t,r){for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(t,r);O(t,e,r),n=!0},p(t,n){49&n&&(o=Ct(t[0].message),yt(),s=Lt(s,n,l,1,t,o,r,e.parentNode,Ot,Wr,e,zr),xt())},i(t){if(!n){for(let t=0;t<o.length;t+=1)bt(s[t]);n=!0}},o(t){for(let t=0;t<s.length;t+=1)_t(s[t]);n=!1},d(t){t&&L(e);for(let e=0;e<s.length;e+=1)s[e].d(t)}}}function Wr(t,e){let n,s,r;return s=new Ys({props:{part:e[13],number:e[15]+1,onUpdate:e[4],onRemove:e[5]}}),{key:t,first:null,c(){n=P(),qt(s.$$.fragment),this.first=n},m(t,e){O(t,n,e),Et(s,t,e),r=!0},p(t,n){e=t;const r={};1&n&&(r.part=e[13]),1&n&&(r.number=e[15]+1),s.$set(r)},i(t){r||(bt(s.$$.fragment,t),r=!0)},o(t){_t(s.$$.fragment,t),r=!1},d(t){t&&L(n),Pt(s,t)}}}function Dr(t){let e;return{c(){e=q("Добавить сообщение")},m(t,n){O(t,e,n)},d(t){t&&L(e)}}}function Hr(t){let e,n=t[0].keyboard.length?"Редактировать клавиатуру":"Добавить клавиатуру";return{c(){e=q(n)},m(t,n){O(t,e,n)},p(t,s){1&s&&n!==(n=t[0].keyboard.length?"Редактировать клавиатуру":"Добавить клавиатуру")&&A(e,n)},d(t){t&&L(e)}}}function Fr(t){let e,n=t[0].transitionTrigger?"Редактировать триггер":"Добавить триггер";return{c(){e=q(n)},m(t,n){O(t,e,n)},p(t,s){1&s&&n!==(n=t[0].transitionTrigger?"Редактировать триггер":"Добавить триггер")&&A(e,n)},d(t){t&&L(e)}}}function Gr(t){let e;return{c(){e=q("Удалить шаг")},m(t,n){O(t,e,n)},d(t){t&&L(e)}}}function Kr(t){let e,n,s,r,o,l,c,i,a,u,d,$,p,f,m,g,h,v,y,x,b,_,w,C,S,T;const P=[Br,Ar],R=[];function M(t,e){return t[0].message.length>0?0:1}return i=M(t),a=R[i]=P[i](t),d=new rs({props:{keyboard:t[0].keyboard}}),p=new Ge({props:{theme:"add",onClick:t[8],$$slots:{default:[Dr]},$$scope:{ctx:t}}}),m=new Ge({props:{theme:"add",onClick:t[9],$$slots:{default:[Hr]},$$scope:{ctx:t}}}),h=new Ge({props:{theme:"add",onClick:t[10],$$slots:{default:[Fr]},$$scope:{ctx:t}}}),y=new Ge({props:{theme:"delete",onClick:t[6],$$slots:{default:[Gr]},$$scope:{ctx:t}}}),b=new br({props:{state:t[3].message,onCreate:t[7]}}),w=new Lr({props:{state:t[3].keyboard,onCreate:t[11]}}),S=new Nr({props:{state:t[3].trigger,onCreate:t[12]}}),{c(){e=U("div"),n=U("div"),s=q(t[1]),r=E(),o=U("div"),l=U("div"),l.textContent="Сообщение:",c=E(),a.c(),u=E(),qt(d.$$.fragment),$=E(),qt(p.$$.fragment),f=E(),qt(m.$$.fragment),g=E(),qt(h.$$.fragment),v=E(),qt(y.$$.fragment),x=E(),qt(b.$$.fragment),_=E(),qt(w.$$.fragment),C=E(),qt(S.$$.fragment),j(n,"class","step__number svelte-1633fsx"),j(l,"class","step-message__title svelte-1633fsx"),j(o,"class","step-message"),j(e,"class","step svelte-1633fsx")},m(t,a){O(t,e,a),k(e,n),k(n,s),k(e,r),k(e,o),k(o,l),k(o,c),R[i].m(o,null),k(o,u),Et(d,o,null),k(o,$),Et(p,o,null),k(o,f),Et(m,o,null),k(o,g),Et(h,o,null),k(o,v),Et(y,o,null),O(t,x,a),Et(b,t,a),O(t,_,a),Et(w,t,a),O(t,C,a),Et(S,t,a),T=!0},p(t,[e]){(!T||2&e)&&A(s,t[1]);let n=i;i=M(t),i===n?R[i].p(t,e):(yt(),_t(R[n],1,1,(()=>{R[n]=null})),xt(),a=R[i],a?a.p(t,e):(a=R[i]=P[i](t),a.c()),bt(a,1),a.m(o,u));const r={};1&e&&(r.keyboard=t[0].keyboard),d.$set(r);const l={};8&e&&(l.onClick=t[8]),65536&e&&(l.$$scope={dirty:e,ctx:t}),p.$set(l);const c={};8&e&&(c.onClick=t[9]),65537&e&&(c.$$scope={dirty:e,ctx:t}),m.$set(c);const $={};8&e&&($.onClick=t[10]),65537&e&&($.$$scope={dirty:e,ctx:t}),h.$set($);const f={};65536&e&&(f.$$scope={dirty:e,ctx:t}),y.$set(f);const g={};8&e&&(g.state=t[3].message),b.$set(g);const v={};8&e&&(v.state=t[3].keyboard),5&e&&(v.onCreate=t[11]),w.$set(v);const x={};8&e&&(x.state=t[3].trigger),5&e&&(x.onCreate=t[12]),S.$set(x)},i(t){T||(bt(a),bt(d.$$.fragment,t),bt(p.$$.fragment,t),bt(m.$$.fragment,t),bt(h.$$.fragment,t),bt(y.$$.fragment,t),bt(b.$$.fragment,t),bt(w.$$.fragment,t),bt(S.$$.fragment,t),T=!0)},o(t){_t(a),_t(d.$$.fragment,t),_t(p.$$.fragment,t),_t(m.$$.fragment,t),_t(h.$$.fragment,t),_t(y.$$.fragment,t),_t(b.$$.fragment,t),_t(w.$$.fragment,t),_t(S.$$.fragment,t),T=!1},d(t){t&&(L(e),L(x),L(_),L(C)),R[i].d(),Pt(d),Pt(p),Pt(m),Pt(h),Pt(y),Pt(b,t),Pt(w,t),Pt(S,t)}}}function Jr(t,e,n){let{step:s={}}=e,{number:r}=e,{writer:o}=e;const l={message:{isOpen:!1,title:""},keyboard:{isOpen:!1,title:""},trigger:{isOpen:!1,title:""}};return t.$$set=t=>{"step"in t&&n(0,s=t.step),"number"in t&&n(1,r=t.number),"writer"in t&&n(2,o=t.writer)},[s,r,o,l,({id:t,order:e,data:n})=>o.updPart(s,t,(t=>(void 0!==e&&(t.order=e),n&&(t.data=n),t))),async t=>{try{Te.update((e=>[...e,t.filename])),o.removePart(t),Le.update((e=>e.filter((e=>e.id!==t.id))))}catch(t){console.error(t)}},async()=>{try{const t=s.message.map(part.filename);Te.update((e=>[...e,...t])),o.removeStep(s)}catch(t){console.error(t)}},({part:t,upload:e})=>{o.addPartToMsg(s,t),e&&Le.update((n=>[...n,{id:t.id,size:t.size,filename:t.filename,upload:e}]))},()=>{n(3,l.message.isOpen=!0,l),n(3,l.message.title="Редактор сообщения",l)},()=>{n(3,l.keyboard.isOpen=!0,l),n(3,l.keyboard.title="Редактор клавиатуры",l)},()=>{n(3,l.trigger.isOpen=!0,l),n(3,l.trigger.title="Редактор триггера",l)},t=>o.addKeyboardToMsg(s,t),t=>o.addTramsitionTriggerToMsg(s,t)]}class Yr extends Mt{constructor(t){super(),jt(this,t,Jr,Kr,c,{step:0,number:1,writer:2})}}function Qr(t,e,n){const s=t.slice();return s[10]=e[n],s}function Vr(t,e){let n,s,r,o,l,c,i,a,u=!1,d=e[10].title+"";return c=N(e[8][0]),{key:t,first:null,c(){n=U("label"),s=U("input"),o=E(),l=q(d),j(s,"type","radio"),s.__value=r=e[10].id,B(s,s.__value),c.p(s),this.first=n},m(t,r){O(t,n,r),k(n,s),s.checked=s.__value===e[2],k(n,o),k(n,l),i||(a=R(s,"change",e[7]),i=!0)},p(t,n){e=t,2&n&&r!==(r=e[10].id)&&(s.__value=r,B(s,s.__value),u=!0),(u||4&n)&&(s.checked=s.__value===e[2]),2&n&&d!==(d=e[10].title+"")&&A(l,d)},d(t){t&&L(n),c.r(),i=!1,a()}}}function Xr(t){let e,n,s,r,o,l,c,i,a,u=[],d=new Map,$=Ct(t[1]);const p=t=>t[10].id;for(let e=0;e<$.length;e+=1){let n=Qr(t,$,e),s=p(n);d.set(s,u[e]=Vr(s,n))}return c=N(t[8][0]),{c(){e=U("div"),n=U("div");for(let t=0;t<u.length;t+=1)u[t].c();s=E(),r=U("label"),o=U("input"),l=q("\n        без напоминаний"),j(o,"type","radio"),o.__value=null,B(o,o.__value),j(n,"class","radio__block"),j(e,"slot","content"),c.p(o)},m(c,d){O(c,e,d),k(e,n);for(let t=0;t<u.length;t+=1)u[t]&&u[t].m(n,null);k(n,s),k(n,r),k(r,o),o.checked=o.__value===t[2],k(r,l),i||(a=R(o,"change",t[9]),i=!0)},p(t,e){6&e&&($=Ct(t[1]),u=Lt(u,e,p,1,t,$,d,n,St,Vr,s,Qr)),4&e&&(o.checked=o.__value===t[2])},d(t){t&&L(e);for(let t=0;t<u.length;t+=1)u[t].d();c.r(),i=!1,a()}}}function Zr(t){let e;return{c(){e=q("Сохранить")},m(t,n){O(t,e,n)},d(t){t&&L(e)}}}function to(t){let e;return{c(){e=q("Закрыть")},m(t,n){O(t,e,n)},d(t){t&&L(e)}}}function eo(t){let e,n,s,r,o;return n=new Ge({props:{onClick:t[3],$$slots:{default:[Zr]},$$scope:{ctx:t}}}),r=new Ge({props:{theme:"delete",onClick:t[6],$$slots:{default:[to]},$$scope:{ctx:t}}}),{c(){e=U("div"),qt(n.$$.fragment),s=E(),qt(r.$$.fragment),j(e,"slot","actions"),j(e,"class","modal__actions svelte-xn3vl")},m(t,l){O(t,e,l),Et(n,e,null),k(e,s),Et(r,e,null),o=!0},p(t,e){const s={};8192&e&&(s.$$scope={dirty:e,ctx:t}),n.$set(s);const o={};5&e&&(o.onClick=t[6]),8192&e&&(o.$$scope={dirty:e,ctx:t}),r.$set(o)},i(t){o||(bt(n.$$.fragment,t),bt(r.$$.fragment,t),o=!0)},o(t){_t(n.$$.fragment,t),_t(r.$$.fragment,t),o=!1},d(t){t&&L(e),Pt(n),Pt(r)}}}function no(t){let e,n;return e=new Bn({props:{state:t[0],width:"620px",$$slots:{actions:[eo],content:[Xr]},$$scope:{ctx:t}}}),{c(){qt(e.$$.fragment)},m(t,s){Et(e,t,s),n=!0},p(t,[n]){const s={};1&n&&(s.state=t[0]),8199&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(bt(e.$$.fragment,t),n=!0)},o(t){_t(e.$$.fragment,t),n=!1},d(t){Pt(e,t)}}}function so(t,e,n){let{state:s}=e,{onCreate:r}=e,{remindersList:o=[]}=e,{currentRemindersId:l}=e,c=l||null;return t.$$set=t=>{"state"in t&&n(0,s=t.state),"onCreate"in t&&n(4,r=t.onCreate),"remindersList"in t&&n(1,o=t.remindersList),"currentRemindersId"in t&&n(5,l=t.currentRemindersId)},[s,o,c,()=>{const t=o.find((t=>t.id===c))||null;r(t),n(0,s.isOpen=!1,s),n(2,c=null)},r,l,()=>{n(2,c=null),n(0,s.isOpen=!1,s)},function(){c=this.__value,n(2,c)},[[]],function(){c=this.__value,n(2,c)}]}class ro extends Mt{constructor(t){super(),jt(this,t,so,no,c,{state:0,onCreate:4,remindersList:1,currentRemindersId:5})}}function oo(t,e,n){const s=t.slice();return s[10]=e[n],s[12]=n,s}function lo(e){let n,s;return n=new Pn({}),{c(){qt(n.$$.fragment)},m(t,e){Et(n,t,e),s=!0},p:t,i(t){s||(bt(n.$$.fragment,t),s=!0)},o(t){_t(n.$$.fragment,t),s=!1},d(t){Pt(n,t)}}}function co(t){let e,n,s=[],r=new Map,o=Ct(t[0].steps);const l=t=>t[10].id;for(let e=0;e<o.length;e+=1){let n=oo(t,o,e),c=l(n);r.set(c,s[e]=io(c,n))}return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=P()},m(t,r){for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(t,r);O(t,e,r),n=!0},p(t,n){9&n&&(o=Ct(t[0].steps),yt(),s=Lt(s,n,l,1,t,o,r,e.parentNode,Ot,io,e,oo),xt())},i(t){if(!n){for(let t=0;t<o.length;t+=1)bt(s[t]);n=!0}},o(t){for(let t=0;t<s.length;t+=1)_t(s[t]);n=!1},d(t){t&&L(e);for(let e=0;e<s.length;e+=1)s[e].d(t)}}}function io(t,e){let n,s,r;return s=new Yr({props:{step:e[10],writer:e[3],number:e[12]+1}}),{key:t,first:null,c(){n=P(),qt(s.$$.fragment),this.first=n},m(t,e){O(t,n,e),Et(s,t,e),r=!0},p(t,n){e=t;const r={};1&n&&(r.step=e[10]),8&n&&(r.writer=e[3]),1&n&&(r.number=e[12]+1),s.$set(r)},i(t){r||(bt(s.$$.fragment,t),r=!0)},o(t){_t(s.$$.fragment,t),r=!1},d(t){t&&L(n),Pt(s,t)}}}function ao(t){let e;return{c(){e=q("Удалить сцену")},m(t,n){O(t,e,n)},d(t){t&&L(e)}}}function uo(t){let e;return{c(){e=q("Добавить напоминания")},m(t,n){O(t,e,n)},d(t){t&&L(e)}}}function $o(t){let e;return{c(){e=q("Добавить шаг")},m(t,n){O(t,e,n)},d(t){t&&L(e)}}}function po(t){let e,n,s,r,o,l,c,i,a,u,d,$,p,f,m,g,h,v,y,x,b,_,w,C,S=t[5].title+"";const T=[co,lo],P=[];function R(t,e){return t[0].steps.length?0:1}return p=R(t),f=P[p]=T[p](t),h=new Ge({props:{theme:"delete",onClick:t[7],$$slots:{default:[ao]},$$scope:{ctx:t}}}),y=new Ge({props:{theme:"add",onClick:t[8],$$slots:{default:[uo]},$$scope:{ctx:t}}}),b=new Ge({props:{theme:"add",onClick:t[9],$$slots:{default:[$o]},$$scope:{ctx:t}}}),w=new ro({props:{state:t[4],remindersList:t[1],onCreate:t[6],currentRemindersId:t[5]?.id}}),{c(){e=U("div"),n=U("div"),s=q(t[2]),r=E(),o=U("div"),l=U("div"),c=U("span"),c.textContent="Напоминание:",i=E(),a=q(S),u=E(),d=U("div"),d.textContent="Шаги:",$=E(),f.c(),m=E(),g=U("div"),qt(h.$$.fragment),v=E(),qt(y.$$.fragment),x=E(),qt(b.$$.fragment),_=E(),qt(w.$$.fragment),j(n,"class","scene__number svelte-babuuc"),j(c,"class","weight600 svelte-babuuc"),j(l,"class","scene__reminders"),j(d,"class","scene__steps-title weight600 svelte-babuuc"),j(o,"class","scene__content svelte-babuuc"),j(g,"class","scene__actions svelte-babuuc"),j(e,"class","scene svelte-babuuc")},m(t,f){O(t,e,f),k(e,n),k(n,s),k(e,r),k(e,o),k(o,l),k(l,c),k(l,i),k(l,a),k(o,u),k(o,d),k(o,$),P[p].m(o,null),k(e,m),k(e,g),Et(h,g,null),k(g,v),Et(y,g,null),k(g,x),Et(b,g,null),k(e,_),Et(w,e,null),C=!0},p(t,[e]){(!C||4&e)&&A(s,t[2]),(!C||32&e)&&S!==(S=t[5].title+"")&&A(a,S);let n=p;p=R(t),p===n?P[p].p(t,e):(yt(),_t(P[n],1,1,(()=>{P[n]=null})),xt(),f=P[p],f?f.p(t,e):(f=P[p]=T[p](t),f.c()),bt(f,1),f.m(o,null));const r={};8192&e&&(r.$$scope={dirty:e,ctx:t}),h.$set(r);const l={};16&e&&(l.onClick=t[8]),8192&e&&(l.$$scope={dirty:e,ctx:t}),y.$set(l);const c={};9&e&&(c.onClick=t[9]),8192&e&&(c.$$scope={dirty:e,ctx:t}),b.$set(c);const i={};16&e&&(i.state=t[4]),2&e&&(i.remindersList=t[1]),32&e&&(i.currentRemindersId=t[5]?.id),w.$set(i)},i(t){C||(bt(f),bt(h.$$.fragment,t),bt(y.$$.fragment,t),bt(b.$$.fragment,t),bt(w.$$.fragment,t),C=!0)},o(t){_t(f),_t(h.$$.fragment,t),_t(y.$$.fragment,t),_t(b.$$.fragment,t),_t(w.$$.fragment,t),C=!1},d(t){t&&L(e),P[p].d(),Pt(h),Pt(y),Pt(b),Pt(w)}}}function fo(t,e,n){let s,{scene:r={}}=e,{remindersList:o=[]}=e,{number:l}=e,{writer:c}=e;const i={isOpen:!1,title:"Выберите напоминание"};return t.$$set=t=>{"scene"in t&&n(0,r=t.scene),"remindersList"in t&&n(1,o=t.remindersList),"number"in t&&n(2,l=t.number),"writer"in t&&n(3,c=t.writer)},t.$$.update=()=>{3&t.$$.dirty&&n(5,s=o.find((t=>t.id===r.reminders?.id))||{title:"не выбрано"})},[r,o,l,c,i,s,t=>c.addRemindersId(r,t),()=>{const t=r.steps.reduce(((t,e)=>{const n=e.message.map(part.filename);return t=[...t,...n]}),[]);Te.update((e=>[...e,...t])),c.removeScene(r.id)},()=>n(4,i.isOpen=!0,i),()=>c.addStep(r.id)]}class mo extends Mt{constructor(t){super(),jt(this,t,fo,po,c,{scene:0,remindersList:1,number:2,writer:3})}}function go(e){let n,s,r,o,l,c,i,a,u,d,$=`${e[1].toFixed(2)}mb from ${e[0].toFixed(2)}mb`;return{c(){n=U("div"),s=U("div"),r=q(e[3]),o=E(),l=U("progress"),c=q(e[2]),i=q("%"),a=E(),u=U("span"),d=q($),j(l,"id","files"),j(l,"max","100"),l.value=e[2],j(u,"class","svelte-zfr54i"),j(n,"class","progress")},m(t,e){O(t,n,e),k(n,s),k(s,r),k(n,o),k(n,l),k(l,c),k(l,i),k(n,a),k(n,u),k(u,d)},p(t,[e]){8&e&&A(r,t[3]),4&e&&A(c,t[2]),4&e&&(l.value=t[2]),3&e&&$!==($=`${t[1].toFixed(2)}mb from ${t[0].toFixed(2)}mb`)&&A(d,$)},i:t,o:t,d(t){t&&L(n)}}}function ho(t,e,n){let{total:s=0}=e,{loaded:r=0}=e,{loadedPercent:o=0}=e,{fileInProcess:l=""}=e;return t.$$set=t=>{"total"in t&&n(0,s=t.total),"loaded"in t&&n(1,r=t.loaded),"loadedPercent"in t&&n(2,o=t.loadedPercent),"fileInProcess"in t&&n(3,l=t.fileInProcess)},[s,r,o,l]}class vo extends Mt{constructor(t){super(),jt(this,t,ho,go,c,{total:0,loaded:1,loadedPercent:2,fileInProcess:3})}}class yo{#s=[];#e=()=>{};#a=0;#u(t){return this.#s.findIndex((e=>e.id===t))}#d(t){return this.#s.find((e=>e.id===t))}init(t){this.#s=t.map((t=>(t.steps.map((e=>(e._parent=t,e.message.map((t=>(t._parent=e,t))),e))),t))),this.#e()}addScene(){this.#s.push({id:this.#a++,steps:[],is_last:!1,reminders:null}),this.#e()}addRemindersId(t,e){t.reminders=e,this.#e()}subscribe(t){this.#e=()=>t(this.#s)}removeScene(t){const e=this.#u(t);this.#s.splice(e,1),this.#e()}addStep(t){const e=this.#d(t);e.steps.push({_parent:e,id:this.#a++,message:[],keyboard:[],transitionTrigger:null}),this.#e()}removeStep(t){const e=t._parent.steps.findIndex(t.id);t._parent.steps.splice(e,1),this.#e()}addKeyboardToMsg(t,e){t.keyboard=e,this.#e()}removeKeyboardToMsg(t){t.keyboard=[],this.#e()}addTramsitionTriggerToMsg(t,e){t.transitionTrigger=e,this.#e()}addPartToMsg(t,e){e.id=this.#a++,e._parent=t,t.message.push(e),t.message.sort(((t,e)=>t.order-e.order)),this.#e()}updPart(t,e,n){n(t.message.find((t=>t.id===e))),t.message.sort(((t,e)=>t.order-e.order)),this.#e()}removePart(t){const e=t._parent.message.findIndex((e=>e.id===t.id));t._parent.message.splice(e,1),this.#e()}}function xo(t,e,n){const s=t.slice();return s[12]=e[n],s[14]=n,s}function bo(e){let n,s;return n=new Pn({}),{c(){qt(n.$$.fragment)},m(t,e){Et(n,t,e),s=!0},p:t,i(t){s||(bt(n.$$.fragment,t),s=!0)},o(t){_t(n.$$.fragment,t),s=!1},d(t){Pt(n,t)}}}function _o(t){let e,n,s=[],r=new Map,o=Ct(t[2]);const l=t=>t[12].id;for(let e=0;e<o.length;e+=1){let n=xo(t,o,e),c=l(n);r.set(c,s[e]=wo(c,n))}return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=P()},m(t,r){for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(t,r);O(t,e,r),n=!0},p(t,n){76&n&&(o=Ct(t[2]),yt(),s=Lt(s,n,l,1,t,o,r,e.parentNode,Ot,wo,e,xo),xt())},i(t){if(!n){for(let t=0;t<o.length;t+=1)bt(s[t]);n=!0}},o(t){for(let t=0;t<s.length;t+=1)_t(s[t]);n=!1},d(t){t&&L(e);for(let e=0;e<s.length;e+=1)s[e].d(t)}}}function wo(t,e){let n,s,r;return s=new mo({props:{scene:e[12],remindersList:e[3],number:e[14]+1,writer:e[6]}}),{key:t,first:null,c(){n=P(),qt(s.$$.fragment),this.first=n},m(t,e){O(t,n,e),Et(s,t,e),r=!0},p(t,n){e=t;const r={};4&n&&(r.scene=e[12]),8&n&&(r.remindersList=e[3]),4&n&&(r.number=e[14]+1),s.$set(r)},i(t){r||(bt(s.$$.fragment,t),r=!0)},o(t){_t(s.$$.fragment,t),r=!1},d(t){t&&L(n),Pt(s,t)}}}function ko(t){let e;return{c(){e=q("Добавить сцену")},m(t,n){O(t,e,n)},d(t){t&&L(e)}}}function Co(t){let e;return{c(){e=q("Сохранить")},m(t,n){O(t,e,n)},d(t){t&&L(e)}}}function So(t){let e,n;return e=new Ge({props:{theme:"delete",onClick:t[8],$$slots:{default:[Oo]},$$scope:{ctx:t}}}),{c(){qt(e.$$.fragment)},m(t,s){Et(e,t,s),n=!0},p(t,n){const s={};32768&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(bt(e.$$.fragment,t),n=!0)},o(t){_t(e.$$.fragment,t),n=!1},d(t){Pt(e,t)}}}function Oo(t){let e;return{c(){e=q("Удалить сценарий")},m(t,n){O(t,e,n)},d(t){t&&L(e)}}}function Lo(t){let e,n,s,r,o,l,c,i,a,u,d,$,p,f,m;n=new vo({props:{total:t[1],fileInProcess:t[4],loaded:t[0],loadedPercent:t[5]}});const g=[_o,bo],h=[];function v(t,e){return t[2].length>0?0:1}c=v(t),i=h[c]=g[c](t),u=new Ge({props:{onClick:t[10],$$slots:{default:[ko]},$$scope:{ctx:t}}}),$=new Ge({props:{theme:"add",onClick:t[7],$$slots:{default:[Co]},$$scope:{ctx:t}}});let y=t[2].length&&So(t);return{c(){e=U("div"),qt(n.$$.fragment),s=E(),r=U("div"),o=U("div"),o.innerHTML='<div class="header-title svelte-1axuv5c">Сцены</div> <div class="header-columns svelte-1axuv5c"><div class="header-column center svelte-1axuv5c">#</div> <div class="header-column svelte-1axuv5c">Описание</div> <div class="header-column svelte-1axuv5c"></div></div>',l=E(),i.c(),a=E(),qt(u.$$.fragment),d=E(),qt($.$$.fragment),p=E(),y&&y.c(),f=P(),j(e,"class","progress-bar svelte-1axuv5c"),D(e,"progress-bar--hidden",0===t[1]),j(o,"class","header"),j(r,"class","scenario svelte-1axuv5c")},m(t,i){O(t,e,i),Et(n,e,null),O(t,s,i),O(t,r,i),k(r,o),k(r,l),h[c].m(r,null),O(t,a,i),Et(u,t,i),O(t,d,i),Et($,t,i),O(t,p,i),y&&y.m(t,i),O(t,f,i),m=!0},p(t,s){const o={};2&s&&(o.total=t[1]),16&s&&(o.fileInProcess=t[4]),1&s&&(o.loaded=t[0]),32&s&&(o.loadedPercent=t[5]),n.$set(o),(!m||2&s)&&D(e,"progress-bar--hidden",0===t[1]);let l=c;c=v(t),c===l?h[c].p(t,s):(yt(),_t(h[l],1,1,(()=>{h[l]=null})),xt(),i=h[c],i?i.p(t,s):(i=h[c]=g[c](t),i.c()),bt(i,1),i.m(r,null));const a={};32768&s&&(a.$$scope={dirty:s,ctx:t}),u.$set(a);const d={};32768&s&&(d.$$scope={dirty:s,ctx:t}),$.$set(d),t[2].length?y?(y.p(t,s),4&s&&bt(y,1)):(y=So(t),y.c(),bt(y,1),y.m(f.parentNode,f)):y&&(yt(),_t(y,1,1,(()=>{y=null})),xt())},i(t){m||(bt(n.$$.fragment,t),bt(i),bt(u.$$.fragment,t),bt($.$$.fragment,t),bt(y),m=!0)},o(t){_t(n.$$.fragment,t),_t(i),_t(u.$$.fragment,t),_t($.$$.fragment,t),_t(y),m=!1},d(t){t&&(L(e),L(s),L(r),L(a),L(d),L(p),L(f)),Pt(n),h[c].d(),Pt(u,t),Pt($,t),y&&y.d(t)}}}function To(t){let e,n;return e=new ze({props:{h1:"Сценарий",$$slots:{default:[Lo]},$$scope:{ctx:t}}}),{c(){qt(e.$$.fragment)},m(t,s){Et(e,t,s),n=!0},p(t,[n]){const s={};32831&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(bt(e.$$.fragment,t),n=!0)},o(t){_t(e.$$.fragment,t),n=!1},d(t){Pt(e,t)}}}function Uo(t,e,n){let s,r,o,l;a(t,Le,(t=>n(9,o=t))),a(t,Te,(t=>n(11,l=t)));let c=[],i=[],u=0,d="";const $=new yo;$.subscribe((t=>{n(2,c=t)}));Z((async()=>{n(3,i=await cn.reminders.list({preview:!0}));const t=await cn.scenario.get();$.init(t)}));return t.$$.update=()=>{512&t.$$.dirty&&n(1,s=o.reduce(((t,e)=>(console.log({elem:e}),e.size+t)),0)),3&t.$$.dirty&&n(5,r=s>0?u/s*100:0),2&t.$$.dirty&&console.log({loadingSize:s})},[u,s,c,i,d,r,$,async()=>{await cn.scenario.set(pn(c,(t=>t.startsWith("_"))));const t=l.map((t=>async()=>await cn.files.delete(t)));await Promise.all(t);for(const{upload:t,size:e,filename:r}of o)try{n(4,d=r),await t(),n(0,u+=e)}catch(t){console.error(t)}finally{n(1,s=0),n(0,u=0),n(4,d="")}},async()=>{await cn.scenario.delete()},o,()=>$.addScene()]}function qo(t){let e,n,s,r,o,l,c,i,a,u,d,$,p,f,m,g,h,v,y,x,b,_,w,C,S=un(t[0])+"",T=t[0].scene+"",P=an(t[0].last_activity_time)+"";return v=new Xt({props:{to:`users/${t[0]._id}`,$$slots:{default:[Eo]},$$scope:{ctx:t}}}),{c(){e=U("div"),n=U("div"),s=U("div"),r=U("span"),r.textContent="Name:",o=E(),l=q(S),c=E(),i=U("div"),a=U("span"),a.textContent="Current step:",u=E(),d=q(T),$=E(),p=U("div"),f=U("span"),f.textContent="Last activity:",m=E(),g=q(P),h=E(),qt(v.$$.fragment),y=E(),x=U("div"),b=U("button"),b.textContent="Delete",j(r,"class","label svelte-1txjx3q"),j(s,"class","user__info svelte-1txjx3q"),D(s,"non-active",!t[0].is_active),j(a,"class","label svelte-1txjx3q"),j(i,"class","user__info"),j(f,"class","label svelte-1txjx3q"),j(p,"class","user__info"),j(n,"class","user__info-wrapper svelte-1txjx3q"),j(b,"class","button--delete svelte-1txjx3q"),j(x,"class","user_actions"),j(e,"class","user svelte-1txjx3q")},m(S,L){O(S,e,L),k(e,n),k(n,s),k(s,r),k(s,o),k(s,l),k(n,c),k(n,i),k(i,a),k(i,u),k(i,d),k(n,$),k(n,p),k(p,f),k(p,m),k(p,g),k(n,h),Et(v,n,null),k(e,y),k(e,x),k(x,b),_=!0,w||(C=R(b,"click",t[2]),w=!0)},p(t,e){(!_||1&e)&&S!==(S=un(t[0])+"")&&A(l,S),(!_||1&e)&&D(s,"non-active",!t[0].is_active),(!_||1&e)&&T!==(T=t[0].scene+"")&&A(d,T),(!_||1&e)&&P!==(P=an(t[0].last_activity_time)+"")&&A(g,P);const n={};1&e&&(n.to=`users/${t[0]._id}`),8&e&&(n.$$scope={dirty:e,ctx:t}),v.$set(n)},i(t){_||(bt(v.$$.fragment,t),_=!0)},o(t){_t(v.$$.fragment,t),_=!1},d(t){t&&L(e),Pt(v),w=!1,C()}}}function Eo(t){let e;return{c(){e=q("Details")},m(t,n){O(t,e,n)},d(t){t&&L(e)}}}function Po(t){let e,n,s=Object.keys(t[0]).length>0,r=s&&qo(t);return{c(){r&&r.c(),e=P()},m(t,s){r&&r.m(t,s),O(t,e,s),n=!0},p(t,[n]){1&n&&(s=Object.keys(t[0]).length>0),s?r?(r.p(t,n),1&n&&bt(r,1)):(r=qo(t),r.c(),bt(r,1),r.m(e.parentNode,e)):r&&(yt(),_t(r,1,1,(()=>{r=null})),xt())},i(t){n||(bt(r),n=!0)},o(t){_t(r),n=!1},d(t){t&&L(e),r&&r.d(t)}}}function Ro(t,e,n){let{data:s={}}=e,{remove:r=(()=>{})}=e;return t.$$set=t=>{"data"in t&&n(0,s=t.data),"remove"in t&&n(1,r=t.remove)},[s,r,()=>r(s._id)]}class jo extends Mt{constructor(t){super(),jt(this,t,Ro,Po,c,{data:0,remove:1})}}function Mo(t,e,n){const s=t.slice();return s[2]=e[n],s}function Io(t){let e,n,s=[],r=new Map,o=Ct(t[0]);const l=t=>t[2]._id;for(let e=0;e<o.length;e+=1){let n=Mo(t,o,e),c=l(n);r.set(c,s[e]=No(c,n))}return{c(){e=U("div");for(let t=0;t<s.length;t+=1)s[t].c();j(e,"class","user-list")},m(t,r){O(t,e,r);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(e,null);n=!0},p(t,n){3&n&&(o=Ct(t[0]),yt(),s=Lt(s,n,l,1,t,o,r,e,Ot,No,null,Mo),xt())},i(t){if(!n){for(let t=0;t<o.length;t+=1)bt(s[t]);n=!0}},o(t){for(let t=0;t<s.length;t+=1)_t(s[t]);n=!1},d(t){t&&L(e);for(let t=0;t<s.length;t+=1)s[t].d()}}}function No(t,e){let n,s,r;return s=new jo({props:{data:e[2],remove:e[1]}}),{key:t,first:null,c(){n=P(),qt(s.$$.fragment),this.first=n},m(t,e){O(t,n,e),Et(s,t,e),r=!0},p(t,n){e=t;const r={};1&n&&(r.data=e[2]),s.$set(r)},i(t){r||(bt(s.$$.fragment,t),r=!0)},o(t){_t(s.$$.fragment,t),r=!1},d(t){t&&L(n),Pt(s,t)}}}function zo(t){let e,n,s=t[0]?.length&&Io(t);return{c(){e=U("section"),s&&s.c()},m(t,r){O(t,e,r),s&&s.m(e,null),n=!0},p(t,n){t[0]?.length?s?(s.p(t,n),1&n&&bt(s,1)):(s=Io(t),s.c(),bt(s,1),s.m(e,null)):s&&(yt(),_t(s,1,1,(()=>{s=null})),xt())},i(t){n||(bt(s),n=!0)},o(t){_t(s),n=!1},d(t){t&&L(e),s&&s.d()}}}function Ao(t){let e,n;return e=new ze({props:{h1:"Участники марафона",$$slots:{default:[zo]},$$scope:{ctx:t}}}),{c(){qt(e.$$.fragment)},m(t,s){Et(e,t,s),n=!0},p(t,[n]){const s={};33&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(bt(e.$$.fragment,t),n=!0)},o(t){_t(e.$$.fragment,t),n=!1},d(t){Pt(e,t)}}}function Bo(t,e,n){let s=[];(async()=>{n(0,s=await cn.users.list())})();return[s,async t=>{if(confirm("Вы уверены что хотите удалить пользователя? Это действие невозможно будет отменить."))try{await cn.users.delete(t),n(0,s=s.filter((e=>e._id!==t)))}catch(t){console.error(t)}}]}function Wo(t,e,n){const s=t.slice();return s[2]=e[n],s[4]=n,s}function Do(t,e,n){const s=t.slice();return s[5]=e[n],s[4]=n,s}function Ho(e){let n;return{c(){n=U("div"),n.textContent="Loading..."},m(t,e){O(t,n,e)},p:t,d(t){t&&L(n)}}}function Fo(t){let e,n,s,r,o,l,c,i,a,u,d,$,p,f,m,g,h,v,y,x,b,_,w,C,S,P,R,M,I,N,z,B,W,H,F,G,K=un(t[0])+"",J=t[0].date_of_joining+"",Y=t[0].scene+"",Q=an(t[0].last_activity_time)+"",V=t[0].is_completed?"Yes":"No",X=t[0].username&&Go(t),Z=Ct(t[0].scene_duration),tt=[];for(let e=0;e<Z.length;e+=1)tt[e]=Ko(Do(t,Z,e));let et=Ct(t[0].scene_message),nt=[];for(let e=0;e<et.length;e+=1)nt[e]=Jo(Wo(t,et,e));return{c(){e=U("div"),n=U("div"),s=U("span"),s.textContent="Name:",r=E(),o=q(K),l=E(),X&&X.c(),c=E(),i=U("div"),a=U("span"),a.textContent="Joining:",u=E(),d=q(J),$=E(),p=U("div"),f=U("span"),f.textContent="Current step:",m=E(),g=q(Y),h=E(),v=U("div"),y=U("span"),y.textContent="Last activity:",x=E(),b=q(Q),_=E(),w=U("div"),C=U("span"),C.textContent="Is the marathon over:",S=E(),P=q(V),R=E(),M=U("div"),I=U("span"),I.textContent="Time for steps:",N=E(),z=U("ul");for(let t=0;t<tt.length;t+=1)tt[t].c();B=E(),W=U("div"),H=U("span"),H.textContent="Messages:",F=E(),G=U("ul");for(let t=0;t<nt.length;t+=1)nt[t].c();j(s,"class","label svelte-1cr32ds"),j(n,"class","user__title-name svelte-1cr32ds"),D(n,"non-active",!t[0].is_active),j(a,"class","label svelte-1cr32ds"),j(i,"class","user__title-elem"),j(f,"class","label svelte-1cr32ds"),j(p,"class","user__title-step"),j(y,"class","label svelte-1cr32ds"),j(v,"class","user__title-elem"),j(C,"class","label svelte-1cr32ds"),j(w,"class","user__title-elem"),j(I,"class","label svelte-1cr32ds"),j(M,"class","user__title-elem"),j(H,"class","label svelte-1cr32ds"),j(W,"class","user__title-elem"),j(e,"class","user__title")},m(t,L){O(t,e,L),k(e,n),k(n,s),k(n,r),k(n,o),k(e,l),X&&X.m(e,null),k(e,c),k(e,i),k(i,a),k(i,u),k(i,d),k(e,$),k(e,p),k(p,f),k(p,m),k(p,g),k(e,h),k(e,v),k(v,y),k(v,x),k(v,b),k(e,_),k(e,w),k(w,C),k(w,S),k(w,P),k(e,R),k(e,M),k(M,I),k(M,N),k(M,z);for(let t=0;t<tt.length;t+=1)tt[t]&&tt[t].m(z,null);k(e,B),k(e,W),k(W,H),k(W,F),k(W,G);for(let t=0;t<nt.length;t+=1)nt[t]&&nt[t].m(G,null)},p(t,s){if(1&s&&K!==(K=un(t[0])+"")&&A(o,K),1&s&&D(n,"non-active",!t[0].is_active),t[0].username?X?X.p(t,s):(X=Go(t),X.c(),X.m(e,c)):X&&(X.d(1),X=null),1&s&&J!==(J=t[0].date_of_joining+"")&&A(d,J),1&s&&Y!==(Y=t[0].scene+"")&&A(g,Y),1&s&&Q!==(Q=an(t[0].last_activity_time)+"")&&A(b,Q),1&s&&V!==(V=t[0].is_completed?"Yes":"No")&&A(P,V),1&s){let e;for(Z=Ct(t[0].scene_duration),e=0;e<Z.length;e+=1){const n=Do(t,Z,e);tt[e]?tt[e].p(n,s):(tt[e]=Ko(n),tt[e].c(),tt[e].m(z,null))}for(;e<tt.length;e+=1)tt[e].d(1);tt.length=Z.length}if(1&s){let e;for(et=Ct(t[0].scene_message),e=0;e<et.length;e+=1){const n=Wo(t,et,e);nt[e]?nt[e].p(n,s):(nt[e]=Jo(n),nt[e].c(),nt[e].m(G,null))}for(;e<nt.length;e+=1)nt[e].d(1);nt.length=et.length}},d(t){t&&L(e),X&&X.d(),T(tt,t),T(nt,t)}}}function Go(t){let e,n,s,r,o,l,c=t[0].username+"";return{c(){e=U("div"),n=U("span"),n.textContent="Login:",s=E(),r=U("a"),o=q(c),j(n,"class","label svelte-1cr32ds"),j(r,"target","_blank"),j(r,"href",l=`https://t.me/${t[0].username}`),j(e,"class","user__title-login")},m(t,l){O(t,e,l),k(e,n),k(e,s),k(e,r),k(r,o)},p(t,e){1&e&&c!==(c=t[0].username+"")&&A(o,c),1&e&&l!==(l=`https://t.me/${t[0].username}`)&&j(r,"href",l)},d(t){t&&L(e)}}}function Ko(t){let e,n,s,r,o,l=t[5].scene+"",c=dn(t[5])+"";return{c(){e=U("li"),n=q("Step "),s=q(l),r=q(": "),o=q(c)},m(t,l){O(t,e,l),k(e,n),k(e,s),k(e,r),k(e,o)},p(t,e){1&e&&l!==(l=t[5].scene+"")&&A(s,l),1&e&&c!==(c=dn(t[5])+"")&&A(o,c)},d(t){t&&L(e)}}}function Jo(t){let e,n,s,r,o,l,c,i,a,u,d,$,p,f,m=t[2].scene+"",g=an(t[2].datestamp)+"",h=t[2].text+"";return{c(){e=U("li"),n=U("div"),s=U("span"),s.textContent="Step:",r=E(),o=q(m),l=E(),c=U("div"),i=U("span"),i.textContent="Time:",a=E(),u=q(g),d=E(),$=U("div"),p=q(h),f=E(),j(s,"class","label svelte-1cr32ds"),j(i,"class","label svelte-1cr32ds")},m(t,m){O(t,e,m),k(e,n),k(n,s),k(n,r),k(n,o),k(e,l),k(e,c),k(c,i),k(c,a),k(c,u),k(e,d),k(e,$),k($,p),k(e,f)},p(t,e){1&e&&m!==(m=t[2].scene+"")&&A(o,m),1&e&&g!==(g=an(t[2].datestamp)+"")&&A(u,g),1&e&&h!==(h=t[2].text+"")&&A(p,h)},d(t){t&&L(e)}}}function Yo(t){let e,n;function s(t,e){return 1&e&&(n=null),null==n&&(n=!!(Object.keys(t[0]).length>0)),n?Fo:Ho}let r=s(t,-1),o=r(t);return{c(){e=U("section"),o.c(),j(e,"class","user svelte-1cr32ds")},m(t,n){O(t,e,n),o.m(e,null)},p(t,n){r===(r=s(t,n))&&o?o.p(t,n):(o.d(1),o=r(t),o&&(o.c(),o.m(e,null)))},d(t){t&&L(e),o.d()}}}function Qo(t){let e,n;return e=new ze({props:{h1:"О пользователе",$$slots:{default:[Yo]},$$scope:{ctx:t}}}),{c(){qt(e.$$.fragment)},m(t,s){Et(e,t,s),n=!0},p(t,[n]){const s={};129&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(bt(e.$$.fragment,t),n=!0)},o(t){_t(e.$$.fragment,t),n=!1},d(t){Pt(e,t)}}}function Vo(t,e,n){let{id:s}=e,r={};return(async()=>{n(0,r=await cn.users.info(s))})(),t.$$set=t=>{"id"in t&&n(1,s=t.id)},[r,s]}const Xo=[{path:"/",component:class extends Mt{constructor(t){super(),jt(this,t,null,Be,c,{})}},title:"Главная"},{path:"/aliases",component:class extends Mt{constructor(t){super(),jt(this,t,Sn,Cn,c,{})}},title:"Кнопки"},{path:"/reminders",component:class extends Mt{constructor(t){super(),jt(this,t,Fs,Hs,c,{})}},title:"Напоминания"},{path:"/scenario",component:class extends Mt{constructor(t){super(),jt(this,t,Uo,To,c,{})}},title:"Сценарий"},{path:"/users",component:class extends Mt{constructor(t){super(),jt(this,t,Bo,Ao,c,{})}},title:"Список пользователей"},{path:"/users/:id",component:class extends Mt{constructor(t){super(),jt(this,t,Vo,Qo,c,{id:1})}},title:"О пользователе",isHidden:!0},{path:"/auth",component:class extends Mt{constructor(t){super(),jt(this,t,Un,Tn,c,{})}},title:"Авторизация",isHidden:!0}];function Zo(t,e,n){const s=t.slice();return s[0]=e[n],s}function tl(e,n){let s,r,o;return r=new ae({props:{path:n[0].path,component:n[0].component}}),{key:e,first:null,c(){s=P(),qt(r.$$.fragment),this.first=s},m(t,e){O(t,s,e),Et(r,t,e),o=!0},p:t,i(t){o||(bt(r.$$.fragment,t),o=!0)},o(t){_t(r.$$.fragment,t),o=!1},d(t){t&&L(s),Pt(r,t)}}}function el(e){let n,s,r=[],o=new Map,l=Ct(Xo);const c=t=>t[0].path;for(let t=0;t<l.length;t+=1){let n=Zo(e,l,t),s=c(n);o.set(s,r[t]=tl(s,n))}return{c(){for(let t=0;t<r.length;t+=1)r[t].c();n=P()},m(t,e){for(let n=0;n<r.length;n+=1)r[n]&&r[n].m(t,e);O(t,n,e),s=!0},p:t,i(t){if(!s){for(let t=0;t<l.length;t+=1)bt(r[t]);s=!0}},o(t){for(let t=0;t<r.length;t+=1)_t(r[t]);s=!1},d(t){t&&L(n);for(let e=0;e<r.length;e+=1)r[e].d(t)}}}function nl(t){let e,n;return e=new Ce({props:{basepath:"/admin",$$slots:{default:[el]},$$scope:{ctx:t}}}),{c(){qt(e.$$.fragment)},m(t,s){Et(e,t,s),n=!0},p(t,[n]){const s={};8&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(bt(e.$$.fragment,t),n=!0)},o(t){_t(e.$$.fragment,t),n=!1},d(t){Pt(e,t)}}}function sl(t){return(async()=>{try{const{is_auth:t}=await cn.auth.status();Oe.set(t)}catch(t){console.error(t)}})(),[]}return new class extends Mt{constructor(t){super(),jt(this,t,sl,nl,c,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
